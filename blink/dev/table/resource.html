<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.5.1 Documentation: SQL Resource</title>
    <link rel="shortcut icon" href="//flink-china.org/doc/blink/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//flink-china.org/doc/blink/page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/flink.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/syntax.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/codetabs.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          







  
    
    
    
      
    
  

  
    
    
    
      
    
  

  
    
    
    
      













<div class="sidenav-logo">
  <p><a href="//flink-china.org/doc/blink"><img class="bottom" alt="Apache Flink" src="//flink-china.org/doc/blink/page/img/navbar-brand-logo.jpg"></a> v1.5.1</p>
</div>
<ul id="sidenav">

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li>
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/concepts/programming-model.html">Programming Model</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/concepts/runtime.html">Distributed Runtime</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-6" data-toggle="collapse"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-6"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-7" data-toggle="collapse">API Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-7"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/datastream_api.html">DataStream API</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-10" data-toggle="collapse">Setup Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-10"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/local_setup.html">Local Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/setup_quickstart.html"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-16" data-toggle="collapse"><i class="fa fa-file-code-o title appetizer" aria-hidden="true"></i> Examples <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-16"><ul>
  <li><a href="//flink-china.org/doc/blink/examples/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/examples.html">DataStream Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/examples.html">DataSet Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/stream_sql_quickstart.html">Stream SQL Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/batch_sql_quickstart.html">Batch SQL Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/scala_shell_quickstart.html">Scala Shell Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/zeppelin_quickstart.html">Flink on Zeppelin Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/examples.html">Flink-Hive Examples</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-25" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Project Setup <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-25"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/java_api_quickstart.html">Project Template for Java</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/scala_api_quickstart.html">Project Template for Scala</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/dependencies.html">Configuring Dependencies, Connectors, Libraries</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/ide_setup.html">IDE Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/scala_shell.html">Scala Shell</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/building.html">Building Flink from Source</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-34" data-toggle="collapse" class="active"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</a><div class="collapse in" id="collapse-34"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-35" data-toggle="collapse">Basic API Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-35"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/api_concepts.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/scala_api_extensions.html">Scala API Extensions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/java8.html">Java 8</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-39" data-toggle="collapse">Streaming (DataStream API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-39"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/datastream_api.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-40" data-toggle="collapse">Event Time <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-40"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/event_time.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/event_timestamps_watermarks.html">Generating Timestamps / Watermarks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/event_timestamp_extractors.html">Pre-defined Timestamp Extractors / Watermark Emitters</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-44" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-44"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/stream/state/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/state.html">Working with State</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/broadcast_state.html">The Broadcast State Pattern</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/checkpointing.html">Checkpointing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/queryable_state.html">Queryable State</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/state_backends.html">State Backends</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/custom_serialization.html">Custom Serialization</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-52" data-toggle="collapse">Operators <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-52"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/stream/operators/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/windows.html">Windows</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/process_function.html">Process Function</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/asyncio.html">Async I/O</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-57" data-toggle="collapse">Connectors <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-57"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/connectors/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/guarantees.html">Fault Tolerance Guarantees</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/kafka.html">Kafka</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/cassandra.html">Cassandra</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/kinesis.html">Kinesis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/filesystem_sink.html">Rolling File Sink</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/nifi.html">NiFi</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/twitter.html">Twitter</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/side_output.html">Side Outputs</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/testing.html">Testing</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/experimental.html">Experimental Features</a></li>
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-73" data-toggle="collapse">Batch (DataSet API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-73"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/batch/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/dataset_transformations.html">Transformations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/fault_tolerance.html">Fault Tolerance</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/iterations.html">Iterations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/connectors.html">Connectors</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/local_execution.html">Local Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/cluster_execution.html">Cluster Execution</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-84" data-toggle="collapse" class="active">Table API & SQL</a><div class="collapse in" id="collapse-84"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/table/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/common.html">Concepts & Common API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/hive_compatibility.html">Hive Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-87" data-toggle="collapse">Streaming Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-87"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/table/streaming/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/dynamic_tables.html">Dynamic Tables</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/time_attributes.html">Time Attributes</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/joins.html">Joins in Continuous Queries</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/temporal_tables.html">Temporal Tables</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/match_recognize.html">Detecting Patterns</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/query_configuration.html">Query Configuration</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/tableApi.html">Table API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sql.html">SQL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/supported_ddl.html">SQL Sources & Sinks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sourceSinks.html">Table Sources & Sinks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/udfs.html">User-defined Functions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sqlClient.html">SQL Client</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/resource.html" class="active">SQL Resource</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/catalog.html">Catalog</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming_optimization.html">Streaming Aggregation Optimization</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/multiple_tablesink_optimization.html">Multiple TableSink Optimization</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-106" data-toggle="collapse">Data Types & Serialization <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-106"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/types_serialization.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/custom_serializers.html">Custom Serializers</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-109" data-toggle="collapse">Managing Execution <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-109"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/execution_configuration.html">Execution Configuration</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/packaging.html">Program Packaging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/parallel.html">Parallel Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/execution_plans.html">Execution Plans</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/restart_strategies.html">Restart Strategies</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-116" data-toggle="collapse">Libraries <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-116"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/cep.html">Event Processing (CEP)</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-118" data-toggle="collapse">Graphs: Gelly <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-118"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/libs/gelly/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_api.html">Graph API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/library_methods.html">Library Methods</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-126" data-toggle="collapse">Machine Learning <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-126"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/libs/ml/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/quickstart.html">Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/contribution_guide.html">How to Contribute</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/cross_validation.html">Cross Validation</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/distance_metrics.html">Distance Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/knn.html">k-Nearest Neighbors Join</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/min_max_scaler.html">MinMax Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/multiple_linear_regression.html">Multiple Linear Regression</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/pipelines.html">Pipelines</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/polynomial_features.html">Polynomial Features</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/sos.html">Stochastic Outlier Selection</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/standard_scaler.html">Standard Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/als.html">ALS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/svm.html">SVM using CoCoA</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/best_practices.html">Best Practices</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/migration.html">API Migration Guides</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-145" data-toggle="collapse"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment & Operations <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-145"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-146" data-toggle="collapse">Clusters & Deployment <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-146"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/cluster_setup.html">Standalone Cluster</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/yarn_setup.html">YARN</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/mesos.html">Mesos</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/kubernetes.html">Kubernetes</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/docker.html">Docker</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/aws.html">AWS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/gce_setup.html">Google Compute Engine</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/mapr_setup.html">MapR</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/hadoop.html">Hadoop Integration</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-157" data-toggle="collapse">High Availability (HA) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-157"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/ha/jobmanager_high_availability.html">JobManager High Availability (HA)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/ha/jobmanager_failover.html">JobManager Failover</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-161" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-161"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/checkpoints.html">Checkpoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/savepoints.html">Savepoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/state_backends.html">State Backends</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/large_state_tuning.html">Tuning Checkpoints and Large State</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/ops/config.html">Configuration</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/production_ready.html">Production Readiness Checklist</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/cli.html">CLI</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/security-kerberos.html">Kerberos</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/security-ssl.html">SSL Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/zeppelin.html">Flink on Zeppelin</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/filesystems.html">File Systems</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/upgrading.html">Upgrading Applications and Flink Versions</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-176" data-toggle="collapse"><i class="fa fa-bug title maindish" aria-hidden="true"></i> Debugging & Monitoring <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-176"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/metrics.html">Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/logging.html">Logging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/historyserver.html">History Server</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/checkpoint_monitoring.html">Monitoring Checkpointing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/back_pressure.html">Monitoring Back Pressure</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/rest_api.html">Monitoring REST API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_event_time.html">Debugging Windows & Event Time</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_classloading.html">Debugging Classloading</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/application_profiling.html">Application Profiling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_job_resources.html">Debugging Job Resources</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-188" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-188"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/components.html">Component Stack</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/job_scheduling.html">Jobs and Scheduling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/task_lifecycle.html">Task Lifecycle</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/taskmanager_resource.html">TaskManager Resource</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/filesystems.html">File Systems</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//flink-china.org/doc/blink/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.4">v1.4</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
      
    </ul>
  </div>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">
          

          





  
  
    
    
      
    
  

  
  
    
    
      
    
  

  
  
    
    
      



<ol class="breadcrumb">

  
  
    <li><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</li>
  

  
  
    <li><a href="//flink-china.org/doc/blink/dev/table/">Table API & SQL</a></li>
  

  
  
    <li class="active">SQL Resource</li>
  

</ol>

<h1>SQL Resource <span class="beta">Beta</span></h1>




<p>Flink’s Table &amp; SQL API make it easily to describe a job, while resource setting is not clearly as
the execution details is invisible through sql interface. 
   We provide two granularity to set resource, and describe them according to batch and streaming scenarios.</p>

<ul id="markdown-toc">
  <li><a href="#coarse-grained" id="markdown-toc-coarse-grained">Coarse-Grained</a></li>
  <li><a href="#streaming-job" id="markdown-toc-streaming-job">Streaming job</a></li>
  <li><a href="#batch-job" id="markdown-toc-batch-job">Batch job</a>    <ul>
      <li><a href="#set-all-resource-according-to-configuration" id="markdown-toc-set-all-resource-according-to-configuration">Set all resource according to configuration</a></li>
      <li><a href="#only-infer-source-parallelism-according-to-source-data-size" id="markdown-toc-only-infer-source-parallelism-according-to-source-data-size">Only infer source parallelism according to source data size</a></li>
      <li><a href="#infer-all-resource-according-to-full-table-stats" id="markdown-toc-infer-all-resource-according-to-full-table-stats">Infer all resource according to full table stats</a></li>
    </ul>
  </li>
  <li><a href="#fine-grained" id="markdown-toc-fine-grained">Fine-Grained</a></li>
</ul>

<h2 id="coarse-grained">Coarse-Grained</h2>

<h2 id="streaming-job">Streaming job</h2>

<p>We can set all resource according to configuration.</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
        <td><strong>sql.resource.default.cpu</strong></td>
        <td>
          Cpu used by an operator, default is 0.3
        </td>
   </tr>
   <tr>
       <td><strong>sql.exec.source.parallelism</strong></td>
       <td>Parallelism of every source operator, if it is not set, use sql.resource.default.parallelism</td>
   </tr>
   <tr>
      <td><strong>sql.resource.default.parallelism</strong></td>
      <td>Parallelism of every operator, StreamExecutionEnvironment::getParallelism()[its default value is cpu cores num] is default</td>
   </tr>
   <tr>
      <td><strong>sql.resource.source.default.memory.mb</strong></td>
      <td>Heap memory used by a source operator, default is 16MB</td>
   </tr>
   <tr>
      <td><strong>sql.resource.sink.default.memory.mb</strong></td>
      <td>Heap memory used by a sink operator, default is 16MB</td>
   </tr>
   <tr>
      <td><strong>sql.resource.default.memory.mb</strong></td>
      <td>Default Heap memory used by an operator, default is 16MB</td>
   </tr>
    <tr>
       <td><strong>sql.resource.source.default.direct.memory.mb</strong></td>
       <td>Direct memory used by a source operator, default is 0</td>
    </tr>
    <tr>
       <td><strong>sql.resource.sink.default.direct.memory.mb</strong></td>
       <td>Direct memory used by a sink operator, default is 0</td>
    </tr>
    <tr>
       <td><strong>sql.resource.default.direct.memory.mb</strong></td>
       <td>Default direct memory used by an operator, default is 0</td>
    </tr>
  </tbody>
</table>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="batch-job">Batch job</h2>

<p>This section describes how to set resource with config. There are three ways to work:</p>

<ul>
  <li>
    <p>set all resource according to configuration</p>
  </li>
  <li>
    <p>only infer source parallelism according to source data size or source rowCount (suitable for Csv, Parquet and other TableSources)</p>
  </li>
  <li>
    <p>infer all resource according to full table stats.</p>
  </li>
</ul>

<h3 id="set-all-resource-according-to-configuration">Set all resource according to configuration</h3>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.infer.mode</strong></td>
      <td>
        Set NONE，NONE is default
      </td>
   </tr>
   <tr>
      <td><strong>sql.resource.default.parallelism</strong></td>
      <td>Parallelism of every node, StreamExecutionEnvironment::getParallelism()[its default value is cpu cores num] is default</td>
   </tr>
  </tbody>
</table>

<p>The following configuration can work by default, and generally does not need to be adjusted：</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.default.cpu</strong></td>
      <td>
        Cpu used by an operator, default is 0.3
      </td>
   </tr>
   <tr>
         <td><strong>sql.resource.source.default.memory.mb</strong></td>
         <td>Heap memory used by a source operator, default is 16MB</td>
     </tr>
      <tr>
         <td><strong>sql.resource.sink.default.memory.mb</strong></td>
         <td>Heap memory used by a sink operator, default is 16MB</td>
      </tr>
      <tr>
         <td><strong>sql.resource.default.memory.mb</strong></td>
         <td>Default Heap memory used by an operator, default is 16MB</td>
      </tr>
       <tr>
          <td><strong>sql.resource.source.default.direct.memory.mb</strong></td>
          <td>Direct memory used by a source operator, default is 0</td>
       </tr>
       <tr>
          <td><strong>sql.resource.sink.default.direct.memory.mb</strong></td>
          <td>Direct memory used by a sink operator, default is 0</td>
       </tr>
       <tr>
          <td><strong>sql.resource.default.direct.memory.mb</strong></td>
          <td>Default direct memory used by an operator, default is 0</td>
       </tr>
         
      
   <tr>
         <td><strong>sql.resource.hash-agg.table.memory.mb</strong></td>
         <td>Reserved managed memory used by a hashAgg operator, default is 32MB</td>
   </tr>
   
   <tr>
          <td><strong>sql.exec.hash-agg.table-prefer-memory-mb</strong></td>
          <td>Prefer managed memory used by a hashAgg operator, default is 128MB, it is not guaranteed.</td>
   </tr>
   
   <tr>
             <td><strong>sql.exec.hash-agg.table-max-memory-mb</strong></td>
             <td>Max managed memory used by a hashAgg operator, default is 512MB.</td>
   </tr>
   
   <tr>
            <td><strong>sql.resource.hash-join.table.memory.mb</strong></td>
            <td>Reserved managed memory used by a hashJoin operator，default is 32MB</td>
      </tr>
      
   <tr>
            <td><strong>sql.resource.hash-join.table-prefer-memory-mb</strong></td>
            <td>Prefer managed memory used by a hashJoin operator，default is 128MB</td>
      </tr>
      
   <tr>
            <td><strong>sql.resource.hash-join.table-max-memory-mb</strong></td>
            <td>Max managed memory used by a hashJoin operator，default is 512MB</td>
   </tr>
         
   <tr>
         <td><strong>sql.resource.sort.buffer.memory.mb</strong></td>
         <td>Reserved managed memory used by a sort operator，default is 32MB</td>
   </tr>
   
   <tr>
            <td><strong>sql.exec.sort.buffer-prefer-memory-mb</strong></td>
            <td>Prefer managed memory used by a sort operator，default is 128MB</td>
      </tr>
      
   <tr>
            <td><strong>sql.exec.sort.buffer-max-memory-mb</strong></td>
            <td>Max managed memory used by a sort operator，default is 512MB</td>
      </tr>
            
   <tr>
        <td><strong>sql.resource.external-buffer.memory.mb</strong></td>
        <td>Managed memory used by a external-buffer operator, default is 10MB</td>
   </tr>
  </tbody>
</table>

<h3 id="only-infer-source-parallelism-according-to-source-data-size">Only infer source parallelism according to source data size</h3>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.infer.mode</strong></td>
      <td>
        Set ONLY_SOURCE，NONE is default
      </td>
   </tr>
   <tr>
      <td><strong>sql.resource.infer.rows-per-partition</strong></td>
         <td>
              How many records one source operator process, default is 100w
         </td>
   </tr>
   <tr>
       <td><strong>sql.resource.infer.source.mb-per-partition</strong></td>
       <td>How much data one source operator process, default is 100MB</td>
   </tr>
   <tr>
       <td><strong>sql.resource.infer.source.parallelism.max</strong></td>
       <td>Max parallelism the source node should be, default is 1000</td>
   </tr>
   <tr>
      <td><strong>sql.resource.default.parallelism</strong></td>
      <td>Parallelism of every operator, source excluded. StreamExecutionEnvironment::getParallelism()[its default value is cpu cores num] is default</td>
   </tr>
      
  </tbody>
</table>

<p>The following configuration can work by default, and generally does not need to be adjusted：</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.default.cpu</strong></td>
      <td>
        Cpu used by an operator, default is 0.3
      </td>
   </tr>
   <tr>
           <td><strong>sql.resource.source.default.memory.mb</strong></td>
           <td>Heap memory used by a source operator, default is 16MB</td>
       </tr>
        <tr>
           <td><strong>sql.resource.sink.default.memory.mb</strong></td>
           <td>Heap memory used by a sink operator, default is 16MB</td>
        </tr>
        <tr>
           <td><strong>sql.resource.default.memory.mb</strong></td>
           <td>Default Heap memory used by an operator, default is 16MB</td>
        </tr>
         <tr>
            <td><strong>sql.resource.source.default.direct.memory.mb</strong></td>
            <td>Direct memory used by a source operator, default is 0</td>
         </tr>
         <tr>
            <td><strong>sql.resource.sink.default.direct.memory.mb</strong></td>
            <td>Direct memory used by a sink operator, default is 0</td>
         </tr>
         <tr>
            <td><strong>sql.resource.default.direct.memory.mb</strong></td>
            <td>Default direct memory used by an operator, default is 0</td>
   </tr>
           
   <tr>
           <td><strong>sql.resource.hash-agg.table.memory.mb</strong></td>
           <td>Reserved managed memory used by a hashAgg operator, default is 32MB</td>
   </tr>
     
   <tr>
            <td><strong>sql.exec.hash-agg.table-prefer-memory-mb</strong></td>
            <td>Prefer managed memory used by a hashAgg operator, default is 128MB, it is not guaranteed.</td>
   </tr>
     
   <tr>
               <td><strong>sql.exec.hash-agg.table-max-memory-mb</strong></td>
               <td>Max managed memory used by a hashAgg operator, default is 512MB.</td>
   </tr>
     
   <tr>
              <td><strong>sql.resource.hash-join.table.memory.mb</strong></td>
              <td>Reserved managed memory used by a hashJoin operator，default is 32MB</td>
   </tr>
        
   <tr>
              <td><strong>sql.resource.hash-join.table-prefer-memory-mb</strong></td>
              <td>Prefer managed memory used by a hashJoin operator，default is 128MB</td>
   </tr>
        
   <tr>
              <td><strong>sql.resource.hash-join.table-max-memory-mb</strong></td>
              <td>Max managed memory used by a hashJoin operator，default is 512MB</td>
   </tr>
           
   <tr>
           <td><strong>sql.resource.sort.buffer.memory.mb</strong></td>
           <td>Reserved managed memory used by a sort operator，default is 32MB</td>
     </tr>
     
   <tr>
              <td><strong>sql.exec.sort.buffer-prefer-memory-mb</strong></td>
              <td>Prefer managed memory used by a sort operator，default is 128MB</td>
   </tr>
        
   <tr>
              <td><strong>sql.exec.sort.buffer-max-memory-mb</strong></td>
              <td>Max managed memory used by a sort operator，default is 512MB</td>
   </tr>
              
   <tr>
          <td><strong>sql.resource.external-buffer.memory.mb</strong></td>
          <td>Managed memory used by a external-buffer operator, default is 10MB</td>
   </tr>
  </tbody>
</table>

<h3 id="infer-all-resource-according-to-full-table-stats">Infer all resource according to full table stats</h3>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.infer.mode</strong></td>
      <td>
        Set ALL，NONE is default
      </td>
   </tr>
   <tr>
      <td><strong>sql.resource.infer.rows-per-partition</strong></td>
         <td>
              How many records a operator process, default is 100w
         </td>
   </tr>
   <tr>
       <td><strong>sql.resource.infer.source.mb-per-partition</strong></td>
       <td>How much data a source operator process, default is 100MB</td>
   </tr>
   <tr>
       <td><strong>sql.resource.infer.source.parallelism.max</strong></td>
       <td>Max parallelism the source node should be, default is 1000</td>
   </tr>
   <tr>
      <td><strong>sql.resource.infer.operator.parallelism.max</strong></td>
      <td>Max parallelism the operator node should be, default is 800</td>
   </tr>
   <tr>
      <td><strong>sql.resource.infer.operator.memory.max.mb</strong></td>
      <td>Max managed memory the operator node can use, default is 1024MB</td>
   </tr>
      
  </tbody>
</table>

<p>The following configuration can work by default, and generally does not need to be adjusted：</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Config name</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
   <tr>
      <td><strong>sql.resource.default.cpu</strong></td>
      <td>
        Cpu used by an operator, default is 0.3
      </td>
   </tr>
   <tr>
      <td><strong>sql.resource.external-buffer.memory.mb</strong></td>
      <td>Managed memory use by a external-buffer operator, default is 10MB</td>
   </tr>
  </tbody>
</table>
<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="fine-grained">Fine-Grained</h2>

<p>User can get streamGraph from tableApi, and then submit it to execute. We provide a tool to
translate the streamGraph to json, so we can set resource by change json value, and then apply the json
to streamGraph.</p>

<p>The following example shows how we use it.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">BatchTableEnvironment</span> <span class="n">tableEnv</span> <span class="o">=</span> <span class="n">TableEnvironment</span><span class="o">.</span><span class="na">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>

<span class="n">String</span> <span class="n">sqlQuery</span> <span class="o">=</span> <span class="s">"SELECT sum(a) as sum_a, c FROM SmallTable3 group by c order by c limit 2"</span>
<span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span><span class="n">sqlQuery</span><span class="o">)</span>
<span class="n">CsvTableSink</span> <span class="n">sink</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CsvTableSink</span><span class="o">(</span><span class="s">"/tmp/test"</span><span class="o">,</span> <span class="s">"|"</span><span class="o">)</span>
<span class="n">table</span><span class="o">.</span><span class="na">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">)</span>
<span class="n">StreamGraph</span> <span class="n">streamGraph</span> <span class="o">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="na">generateStreamGraph</span><span class="o">()</span>
<span class="n">StreamGraphProperty</span> <span class="n">property</span> <span class="o">=</span> <span class="n">StreamGraphPropertyGenerator</span><span class="o">.</span><span class="na">generateProperties</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">)</span>
<span class="n">String</span> <span class="n">json</span> <span class="o">=</span> <span class="n">property</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">tableEnv</span> <span class="k">=</span> <span class="nc">TableEnvironment</span><span class="o">.</span><span class="n">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>
<span class="k">val</span> <span class="n">sqlQuery</span> <span class="k">=</span> <span class="s">"SELECT sum(a) as sum_a, c FROM SmallTable3 group by c order by c limit 2"</span>
<span class="k">val</span> <span class="n">table</span> <span class="k">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span><span class="n">sqlQuery</span><span class="o">)</span>
<span class="k">val</span> <span class="n">sink</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">CsvTableSink</span><span class="o">(</span><span class="s">"/tmp/test"</span><span class="o">,</span> <span class="s">"|"</span><span class="o">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">)</span>
<span class="k">val</span> <span class="n">streamGraph</span> <span class="k">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="n">generateStreamGraph</span><span class="o">()</span>
<span class="k">val</span> <span class="n">property</span> <span class="k">=</span> <span class="nc">StreamGraphPropertyGenerator</span><span class="o">.</span><span class="n">generateProperties</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">)</span>
<span class="k">val</span> <span class="n">json</span> <span class="k">=</span> <span class="n">property</span><span class="o">.</span><span class="n">toString</span></code></pre></figure>

  </div>
</div>

<p>Now we can get the flowing json:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="err">{</span>
  <span class="nv">"nodes"</span> <span class="p">:</span> <span class="p">[</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-0"</span><span class="p">,</span>          <span class="o">//</span> <span class="n">identification</span> <span class="k">of</span> <span class="k">operator</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">change</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"SmallTable3"</span><span class="p">,</span>     <span class="o">//</span> <span class="k">operator</span> <span class="n">name</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Source"</span><span class="p">,</span>          <span class="o">//</span> <span class="k">operator</span> <span class="k">type</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>          <span class="o">//</span> <span class="n">parallelism</span><span class="p">,</span> <span class="n">can</span> <span class="n">be</span> <span class="n">changed</span><span class="p">.</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>       <span class="o">//</span> <span class="k">max</span> <span class="n">parallelism</span><span class="p">,</span> <span class="n">must</span> <span class="o">&gt;</span> <span class="n">parallelism</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="p">,</span>             <span class="o">//</span> <span class="n">cpu</span> <span class="n">cost</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">16</span>          <span class="o">//</span> <span class="n">heap</span> <span class="n">memory</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-1"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"SourceConversion(table:[builtin, default, SmallTable3], fields:(a, b, c))"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-2"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"Calc(select: (c, a))"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-3"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"LocalHashAggregate(groupBy:(c),select:(c, Partial_SUM(a) AS sum$0),)"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span><span class="p">,</span>
    <span class="nv">"managed_memory"</span> <span class="p">:</span> <span class="mi">33</span><span class="p">,</span>
    <span class="nv">"floating_managed_memory"</span> <span class="p">:</span> <span class="mi">4</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-4"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"GlobalHashAggregate(groupBy:(c),select:(c, Final_SUM(sum$0) AS sum_a),)"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span><span class="p">,</span>
    <span class="nv">"managed_memory"</span> <span class="p">:</span> <span class="mi">33</span><span class="p">,</span>             <span class="o">//</span> <span class="n">managed</span> <span class="n">memory</span> <span class="n">consumed</span> <span class="k">by</span> <span class="k">operator</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">change</span>
    <span class="nv">"floating_managed_memory"</span> <span class="p">:</span> <span class="mi">4</span>      <span class="o">//</span> <span class="n">floating</span> <span class="n">managed</span> <span class="n">memory</span><span class="p">,</span> <span class="n">can</span> <span class="n">be</span> <span class="n">changed</span><span class="p">.</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-5"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"LocalSortLimit(orderBy: [c ASC], offset: 0, limit: 2)"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">18</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-6"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"GlobalSortLimit(orderBy: [c ASC], offset: 0, limit: 2)"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-7"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"Calc(select: (sum_a, c))"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Operator"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">46</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"uid"</span> <span class="p">:</span> <span class="nv">"table-8"</span><span class="p">,</span>
    <span class="nv">"name"</span> <span class="p">:</span> <span class="nv">"csv sink: </span><span class="se">\\</span><span class="nv">/tmp</span><span class="se">\\</span><span class="nv">/test"</span><span class="p">,</span>
    <span class="nv">"pact"</span> <span class="p">:</span> <span class="nv">"Sink"</span><span class="p">,</span>
    <span class="nv">"parallelism"</span> <span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nv">"maxParallelism"</span> <span class="p">:</span> <span class="mi">32768</span><span class="p">,</span>
    <span class="nv">"vcore"</span> <span class="p">:</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="p">,</span>
    <span class="nv">"heap_memory"</span> <span class="p">:</span> <span class="mi">16</span>
  <span class="err">}</span> <span class="p">],</span>
  <span class="nv">"links"</span> <span class="p">:</span> <span class="p">[</span> <span class="err">{</span>             <span class="o">//</span><span class="n">links</span> <span class="k">are</span> <span class="n">edges</span> <span class="k">between</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">cannot</span> <span class="n">change</span><span class="p">.</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-0"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-1"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-1"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-2"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-2"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-3"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-3"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-4"</span><span class="p">,</span>
    <span class="nv">"ship_strategy"</span> <span class="p">:</span> <span class="nv">"HASH[c]"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-4"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-5"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-5"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-6"</span><span class="p">,</span>
    <span class="nv">"ship_strategy"</span> <span class="p">:</span> <span class="nv">"GLOBAL"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-6"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-7"</span>
  <span class="err">}</span><span class="p">,</span> <span class="err">{</span>
    <span class="nv">"source"</span> <span class="p">:</span> <span class="nv">"table-7"</span><span class="p">,</span>
    <span class="nv">"target"</span> <span class="p">:</span> <span class="nv">"table-8"</span>
  <span class="err">}</span> <span class="p">]</span>
<span class="err">}</span></code></pre></figure>

<p>When we finish setting resource, we apply this resource json to streamGraph.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">BatchTableEnvironment</span> <span class="n">tableEnv</span> <span class="o">=</span> <span class="n">TableEnvironment</span><span class="o">.</span><span class="na">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>

<span class="n">String</span> <span class="n">sqlQuery</span> <span class="o">=</span> <span class="s">"SELECT sum(a) as sum_a, c FROM SmallTable3 group by c order by c limit 2"</span>
<span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span><span class="n">sqlQuery</span><span class="o">)</span>
<span class="n">CsvTableSink</span> <span class="n">sink</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CsvTableSink</span><span class="o">(</span><span class="s">"/tmp/test"</span><span class="o">,</span> <span class="s">"|"</span><span class="o">)</span>
<span class="n">table</span><span class="o">.</span><span class="na">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">)</span>
<span class="n">StreamGraph</span> <span class="n">streamGraph</span> <span class="o">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="na">generateStreamGraph</span><span class="o">()</span>
<span class="n">StreamGraphConfigurer</span><span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">,</span> <span class="n">StreamGraphProperty</span><span class="o">.</span><span class="na">fromJson</span><span class="o">(</span><span class="n">adjustJson</span><span class="o">))</span>
<span class="n">env</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">)</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">tableEnv</span> <span class="k">=</span> <span class="nc">TableEnvironment</span><span class="o">.</span><span class="n">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>
<span class="k">val</span> <span class="n">sqlQuery</span> <span class="k">=</span> <span class="s">"SELECT sum(a) as sum_a, c FROM SmallTable3 group by c order by c limit 2"</span>
<span class="k">val</span> <span class="n">table</span> <span class="k">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span><span class="n">sqlQuery</span><span class="o">)</span>
<span class="k">val</span> <span class="n">sink</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">CsvTableSink</span><span class="o">(</span><span class="s">"/tmp/test"</span><span class="o">,</span> <span class="s">"|"</span><span class="o">)</span>
<span class="n">table</span><span class="o">.</span><span class="n">writeToSink</span><span class="o">(</span><span class="n">sink</span><span class="o">)</span>
<span class="k">val</span> <span class="n">streamGraph</span> <span class="k">=</span> <span class="n">tEnv</span><span class="o">.</span><span class="n">generateStreamGraph</span><span class="o">()</span>
<span class="nc">StreamGraphConfigurer</span><span class="o">.</span><span class="n">configure</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">,</span> <span class="nc">StreamGraphProperty</span><span class="o">.</span><span class="n">fromJson</span><span class="o">(</span><span class="n">adjustJson</span><span class="o">))</span>
<span class="n">env</span><span class="o">.</span><span class="n">execute</span><span class="o">(</span><span class="n">streamGraph</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



        </div>
      </div>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//flink-china.org/doc/blink/page/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//flink-china.org/doc/blink/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
