<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Apache Flink 1.5.1 Documentation: SQL</title>
    <link rel="shortcut icon" href="//flink-china.org/doc/blink/page/favicon.ico" type="image/x-icon">
    <link rel="icon" href="//flink-china.org/doc/blink/page/favicon.ico" type="image/x-icon">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/flink.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/syntax.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/css/codetabs.css">
    <link rel="stylesheet" href="//flink-china.org/doc/blink/page/font-awesome/css/font-awesome.min.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    

    <!-- Main content. -->
    <div class="container">
      
      <div class="row">
        <div class="col-lg-3" id="sidenavcol">
          







  
    
    
    
      
    
  

  
    
    
    
      
    
  

  
    
    
    
      













<div class="sidenav-logo">
  <p><a href="//flink-china.org/doc/blink"><img class="bottom" alt="Apache Flink" src="//flink-china.org/doc/blink/page/img/navbar-brand-logo.jpg"></a> v1.5.1</p>
</div>
<ul id="sidenav">

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/"><i class="fa fa-home title" aria-hidden="true"></i> Home</a></li>
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-2" data-toggle="collapse"><i class="fa fa-map-o title appetizer" aria-hidden="true"></i> Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-2"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/concepts/programming-model.html">Programming Model</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/concepts/runtime.html">Distributed Runtime</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-6" data-toggle="collapse"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-6"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-7" data-toggle="collapse">API Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-7"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/datastream_api.html">DataStream API</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-10" data-toggle="collapse">Setup Tutorials <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-10"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/local_setup.html">Local Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/tutorials/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/setup_quickstart.html"><i class="fa fa-power-off title appetizer" aria-hidden="true"></i> Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-16" data-toggle="collapse"><i class="fa fa-file-code-o title appetizer" aria-hidden="true"></i> Examples <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-16"><ul>
  <li><a href="//flink-china.org/doc/blink/examples/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/examples.html">DataStream Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/examples.html">DataSet Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/stream_sql_quickstart.html">Stream SQL Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/batch_sql_quickstart.html">Batch SQL Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/scala_shell_quickstart.html">Scala Shell Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/zeppelin_quickstart.html">Flink on Zeppelin Examples</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/examples.html">Flink-Hive Examples</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-25" data-toggle="collapse"><i class="fa fa-cogs title maindish" aria-hidden="true"></i> Project Setup <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-25"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/java_api_quickstart.html">Project Template for Java</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/quickstart/scala_api_quickstart.html">Project Template for Scala</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/dependencies.html">Configuring Dependencies, Connectors, Libraries</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/ide_setup.html">IDE Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/scala_shell.html">Scala Shell</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/flink_on_windows.html">Running Flink on Windows</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/start/building.html">Building Flink from Source</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-34" data-toggle="collapse" class="active"><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</a><div class="collapse in" id="collapse-34"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-35" data-toggle="collapse">Basic API Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-35"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/api_concepts.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/scala_api_extensions.html">Scala API Extensions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/java8.html">Java 8</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-39" data-toggle="collapse">Streaming (DataStream API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-39"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/datastream_api.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-40" data-toggle="collapse">Event Time <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-40"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/event_time.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/event_timestamps_watermarks.html">Generating Timestamps / Watermarks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/event_timestamp_extractors.html">Pre-defined Timestamp Extractors / Watermark Emitters</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-44" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-44"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/stream/state/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/state.html">Working with State</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/broadcast_state.html">The Broadcast State Pattern</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/checkpointing.html">Checkpointing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/queryable_state.html">Queryable State</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/state_backends.html">State Backends</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/state/custom_serialization.html">Custom Serialization</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-52" data-toggle="collapse">Operators <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-52"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/stream/operators/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/windows.html">Windows</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/process_function.html">Process Function</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/operators/asyncio.html">Async I/O</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-57" data-toggle="collapse">Connectors <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-57"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/connectors/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/guarantees.html">Fault Tolerance Guarantees</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/kafka.html">Kafka</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/cassandra.html">Cassandra</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/kinesis.html">Kinesis</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/elasticsearch.html">Elasticsearch</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/filesystem_sink.html">Rolling File Sink</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/rabbitmq.html">RabbitMQ</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/nifi.html">NiFi</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/connectors/twitter.html">Twitter</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/side_output.html">Side Outputs</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/stream/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/testing.html">Testing</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/dev/stream/experimental.html">Experimental Features</a></li>
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-73" data-toggle="collapse">Batch (DataSet API) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-73"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/batch/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/dataset_transformations.html">Transformations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/fault_tolerance.html">Fault Tolerance</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/zip_elements_guide.html">Zipping Elements</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/iterations.html">Iterations</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/python.html">Python API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/connectors.html">Connectors</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/batch/hadoop_compatibility.html">Hadoop Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/local_execution.html">Local Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/cluster_execution.html">Cluster Execution</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-84" data-toggle="collapse" class="active">Table API & SQL</a><div class="collapse in" id="collapse-84"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/table/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/common.html">Concepts & Common API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/hive_compatibility.html">Hive Compatibility</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-87" data-toggle="collapse">Streaming Concepts <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-87"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/table/streaming/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/dynamic_tables.html">Dynamic Tables</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/time_attributes.html">Time Attributes</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/joins.html">Joins in Continuous Queries</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/temporal_tables.html">Temporal Tables</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/match_recognize.html">Detecting Patterns</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming/query_configuration.html">Query Configuration</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/tableApi.html">Table API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sql.html" class="active">SQL</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/supported_ddl.html">SQL Sources & Sinks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sourceSinks.html">Table Sources & Sinks</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/udfs.html">User-defined Functions</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/sqlClient.html">SQL Client</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/resource.html">SQL Resource</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/catalog.html">Catalog</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/streaming_optimization.html">Streaming Aggregation Optimization</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/table/multiple_tablesink_optimization.html">Multiple TableSink Optimization</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-106" data-toggle="collapse">Data Types & Serialization <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-106"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/types_serialization.html">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/custom_serializers.html">Custom Serializers</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-109" data-toggle="collapse">Managing Execution <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-109"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/execution_configuration.html">Execution Configuration</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/packaging.html">Program Packaging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/parallel.html">Parallel Execution</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/execution_plans.html">Execution Plans</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/restart_strategies.html">Restart Strategies</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-116" data-toggle="collapse">Libraries <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-116"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/cep.html">Event Processing (CEP)</a></li>
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-118" data-toggle="collapse">Graphs: Gelly <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-118"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/libs/gelly/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_api.html">Graph API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/iterative_graph_processing.html">Iterative Graph Processing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/library_methods.html">Library Methods</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_algorithms.html">Graph Algorithms</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/graph_generators.html">Graph Generators</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/gelly/bipartite_graph.html">Bipartite Graph</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-126" data-toggle="collapse">Machine Learning <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-126"><ul>
  <li><a href="//flink-china.org/doc/blink/dev/libs/ml/">Overview</a></li>
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/quickstart.html">Quickstart</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/contribution_guide.html">How to Contribute</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/cross_validation.html">Cross Validation</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/distance_metrics.html">Distance Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/knn.html">k-Nearest Neighbors Join</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/min_max_scaler.html">MinMax Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/multiple_linear_regression.html">Multiple Linear Regression</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/pipelines.html">Pipelines</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/polynomial_features.html">Polynomial Features</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/sos.html">Stochastic Outlier Selection</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/standard_scaler.html">Standard Scaler</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/als.html">ALS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/libs/ml/svm.html">SVM using CoCoA</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/best_practices.html">Best Practices</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/dev/migration.html">API Migration Guides</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-145" data-toggle="collapse"><i class="fa fa-sliders title maindish" aria-hidden="true"></i> Deployment & Operations <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-145"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-146" data-toggle="collapse">Clusters & Deployment <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-146"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/cluster_setup.html">Standalone Cluster</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/yarn_setup.html">YARN</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/mesos.html">Mesos</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/kubernetes.html">Kubernetes</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/docker.html">Docker</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/aws.html">AWS</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/gce_setup.html">Google Compute Engine</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/mapr_setup.html">MapR</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/deployment/hadoop.html">Hadoop Integration</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-157" data-toggle="collapse">High Availability (HA) <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-157"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/ha/jobmanager_high_availability.html">JobManager High Availability (HA)</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/ha/jobmanager_failover.html">JobManager Failover</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-161" data-toggle="collapse">State & Fault Tolerance <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-161"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/checkpoints.html">Checkpoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/savepoints.html">Savepoints</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/state_backends.html">State Backends</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/state/large_state_tuning.html">Tuning Checkpoints and Large State</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
<li><a href="//flink-china.org/doc/blink/ops/config.html">Configuration</a></li>
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/production_ready.html">Production Readiness Checklist</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/cli.html">CLI</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/security-kerberos.html">Kerberos</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/security-ssl.html">SSL Setup</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/zeppelin.html">Flink on Zeppelin</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/filesystems.html">File Systems</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/ops/upgrading.html">Upgrading Applications and Flink Versions</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    

    
    
      
      
        
        
<li><a href="#collapse-176" data-toggle="collapse"><i class="fa fa-bug title maindish" aria-hidden="true"></i> Debugging & Monitoring <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-176"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/metrics.html">Metrics</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/logging.html">Logging</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/historyserver.html">History Server</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/checkpoint_monitoring.html">Monitoring Checkpointing</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/back_pressure.html">Monitoring Back Pressure</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/rest_api.html">Monitoring REST API</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_event_time.html">Debugging Windows & Event Time</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_classloading.html">Debugging Classloading</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/application_profiling.html">Application Profiling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/monitoring/debugging_job_resources.html">Debugging Job Resources</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    

    

    
    
    

    <hr class="section-break"></hr>

    
    
      
      
        
        
<li><a href="#collapse-188" data-toggle="collapse"><i class="fa fa-book title dessert" aria-hidden="true"></i> Internals <i class="fa fa-caret-down pull-right" aria-hidden="true" style="padding-top: 4px"></i></a><div class="collapse" id="collapse-188"><ul>
  
        
        
        

        
        
      
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/components.html">Component Stack</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/stream_checkpointing.html">Fault Tolerance for Data Streaming</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/job_scheduling.html">Jobs and Scheduling</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/task_lifecycle.html">Task Lifecycle</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/taskmanager_resource.html">TaskManager Resource</a></li>
    
  

  
    

    

    
    
    

    

    
    
<li><a href="//flink-china.org/doc/blink/internals/filesystems.html">File Systems</a></li>
    
  

  
    
      
      
</li></ul></div>
      
      
    
  

  
    
      
</ul>

<div class="sidenav-search-box">
  <form class="navbar-form" role="search" action="//flink-china.org/doc/blink/search-results.html">
    <div class="form-group">
      <input type="text" class="form-control" size="16px" name="q" placeholder="Search">
    </div>
    <button type="submit" class="btn btn-default">Go</button>
  </form>
</div>

<div class="sidenav-versions">
  <div class="dropdown">
    <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Pick Docs Version
    <span class="caret"></span></button>
    <ul class="dropdown-menu">
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.4">v1.4</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.3">v1.3</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.2">v1.2</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.1">v1.1</a></li>
      
      <li><a href="http://ci.apache.org/projects/flink/flink-docs-release-1.0">v1.0</a></li>
      
    </ul>
  </div>
</div>

        </div>
        <div class="col-lg-9 content" id="contentcol">
          

          





  
  
    
    
      
    
  

  
  
    
    
      
    
  

  
  
    
    
      



<ol class="breadcrumb">

  
  
    <li><i class="fa fa-code title maindish" aria-hidden="true"></i> Application Development</li>
  

  
  
    <li><a href="//flink-china.org/doc/blink/dev/table/">Table API & SQL</a></li>
  

  
  
    <li class="active">SQL</li>
  

</ol>

<h1>SQL</h1>




<p>The SQL language includes Data Definition Language (DDL), query and Data Manipulation Language (DML). Flink has a preliminary supports for DDL, query and DML features.</p>

<p>Before the existence of the SQL CLI, queries written in the Flink SQL can only be embedded in a table program written in Java or Scala. The tables accessed in the SQL query must be registered in the TableEnvironment first. It’s impossible to use SQL only to complete the work.</p>

<p>The SQL CLI is designed to provide an easy way to write, debug, and submit table programs without writing a single line of Java or Scala code. For SQL CLI, DDL replaces the table definition and registration process in the table programs. By passing a SQL DDL description text to the SQL CLI, it will be parsed into table objects and registered to the <code class="highlighter-rouge">TableEnvironment</code>, then follow up SQL queries can access these tables directly.</p>

<p>SQL queries are specified with the <code class="highlighter-rouge">sqlQuery()</code> method of the <code class="highlighter-rouge">TableEnvironment</code>. The method returns the result of the SQL query as a <code class="highlighter-rouge">Table</code>. A <code class="highlighter-rouge">Table</code> can be used in <a href="common.html#mixing-table-api-and-sql">subsequent SQL and Table API queries</a>, be <a href="common.html#integration-with-datastream-and-dataset-api">converted into a DataSet or DataStream</a>, or <a href="common.html#emit-a-table">written to a TableSink</a>). SQL and Table API queries can be seamlessly mixed and are holistically optimized and translated into a single program.</p>

<p>In order to access a table in a SQL query, it must be <a href="common.html#register-tables-in-the-catalog">registered in the TableEnvironment</a>. A table can be registered from a <a href="common.html#register-a-tablesource">TableSource</a>, <a href="common.html#register-a-table">Table</a>, <a href="common.html#register-a-datastream-or-dataset-as-table">DataStream, or DataSet</a>. Alternatively, users can also <a href="catalog.html">register catalogs in a TableEnvironment</a> to specify the location of the data sources.</p>

<p>For convenience, <code class="highlighter-rouge">Table.toString()</code> automatically registers the table under a unique name in its <code class="highlighter-rouge">TableEnvironment</code> and returns the name. Hence, <code class="highlighter-rouge">Table</code> objects can be directly inlined into SQL queries (by string concatenation) as shown in the examples below.</p>

<p><strong>Note:</strong> The current DDL is not persistent and can not be shared, only exists in a single SQL query (along with the life cycle of a query), so currently only CREATE operations are supported (ALTER/DROP is not introduced). Later versions will support persistence and the corresponding DDL objects will be saved into persistent catalogs and are easier to use or modify (does not need to be declared every time, and can be shared).
For example, user <code class="highlighter-rouge">A</code> produced a table <code class="highlighter-rouge">T1</code> in a query, then <code class="highlighter-rouge">T1</code> can be shared as a data source in another query of user <code class="highlighter-rouge">B</code>. Flink’s SQL support is not yet feature complete. Queries that include unsupported SQL features cause a <code class="highlighter-rouge">TableException</code>. The supported features of SQL on batch and streaming tables are listed in the following sections.</p>

<ul id="markdown-toc">
  <li><a href="#creating-a-table" id="markdown-toc-creating-a-table">Creating a Table</a></li>
  <li><a href="#creating-a-view" id="markdown-toc-creating-a-view">Creating a View</a></li>
  <li><a href="#creating-a-function" id="markdown-toc-creating-a-function">Creating a Function</a></li>
  <li><a href="#supported-ddl-syntax" id="markdown-toc-supported-ddl-syntax">Supported DDL Syntax</a>    <ul>
      <li><a href="#create-table" id="markdown-toc-create-table">CREATE TABLE</a></li>
      <li><a href="#create-view" id="markdown-toc-create-view">CREATE VIEW</a></li>
      <li><a href="#create-function" id="markdown-toc-create-function">CREATE FUNCTION</a></li>
    </ul>
  </li>
  <li><a href="#specifying-a-query" id="markdown-toc-specifying-a-query">Specifying a Query</a></li>
  <li><a href="#supported-query-syntax" id="markdown-toc-supported-query-syntax">Supported Query Syntax</a>    <ul>
      <li><a href="#queries" id="markdown-toc-queries">Queries</a></li>
    </ul>
  </li>
  <li><a href="#supported-dml-syntax" id="markdown-toc-supported-dml-syntax">Supported DML Syntax</a>    <ul>
      <li><a href="#dml-insert-only" id="markdown-toc-dml-insert-only">DML (Insert Only)</a></li>
    </ul>
  </li>
  <li><a href="#operations" id="markdown-toc-operations">Operations</a>    <ul>
      <li><a href="#show-and-use" id="markdown-toc-show-and-use">Show and Use</a></li>
      <li><a href="#scan-projection-and-filter" id="markdown-toc-scan-projection-and-filter">Scan, Projection and Filter</a></li>
      <li><a href="#aggregations" id="markdown-toc-aggregations">Aggregations</a></li>
      <li><a href="#joins" id="markdown-toc-joins">Joins</a></li>
      <li><a href="#topn" id="markdown-toc-topn">TOPN</a></li>
      <li><a href="#set-operations" id="markdown-toc-set-operations">Set Operations</a></li>
      <li><a href="#orderby--limit" id="markdown-toc-orderby--limit">OrderBy &amp; Limit</a></li>
      <li><a href="#insert" id="markdown-toc-insert">Insert</a></li>
      <li><a href="#group-windows" id="markdown-toc-group-windows">Group Windows</a></li>
      <li><a href="#pattern-recognition" id="markdown-toc-pattern-recognition">Pattern Recognition</a></li>
    </ul>
  </li>
  <li><a href="#data-types" id="markdown-toc-data-types">Data Types</a></li>
  <li><a href="#built-in-functions" id="markdown-toc-built-in-functions">Built-In Functions</a>    <ul>
      <li><a href="#unsupported-functions" id="markdown-toc-unsupported-functions">Unsupported Functions</a></li>
    </ul>
  </li>
  <li><a href="#reserved-keywords" id="markdown-toc-reserved-keywords">Reserved Keywords</a></li>
</ul>

<h2 id="creating-a-table">Creating a Table</h2>

<p>The following example shows how to create a table via DDL. More details see <a href="//flink-china.org/doc/blink/dev/table/supported_ddl.html">Supported DDL</a>.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- Create a table named `Orders` which includes a primary key, and is stored as a CSV file</span>
<span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">Orders</span> <span class="p">(</span>
    <span class="n">orderId</span> <span class="n">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">customId</span> <span class="n">VARCHAR</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">itemId</span> <span class="n">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">totalPrice</span> <span class="n">BIGINT</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">orderTime</span> <span class="k">TIMESTAMP</span> <span class="k">NOT</span> <span class="k">NULL</span><span class="p">,</span>
    <span class="n">description</span> <span class="n">VARCHAR</span><span class="p">,</span>
    <span class="k">PRIMARY</span> <span class="k">KEY</span><span class="p">(</span><span class="n">orderId</span><span class="p">)</span>
<span class="p">)</span> <span class="k">WITH</span> <span class="p">(</span>
    <span class="k">type</span><span class="o">=</span><span class="s1">'csv'</span><span class="p">,</span>
    <span class="n">path</span><span class="o">=</span><span class="s1">'file://abc/csv_file1'</span>
<span class="p">)</span></code></pre></figure>

<h2 id="creating-a-view">Creating a View</h2>

<p>The following example shows how to create a view via DDL.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- The view `OrderItemStats_2018` stats all items' order count in the year 2018.</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">BigOrders</span> <span class="k">AS</span>
<span class="k">SELECT</span>
    <span class="n">itemId</span><span class="p">,</span> <span class="k">count</span><span class="p">(</span><span class="o">*</span><span class="p">)</span> <span class="k">AS</span> <span class="n">orderCount</span><span class="p">,</span> <span class="k">sum</span><span class="p">(</span><span class="n">totalPrice</span><span class="p">)</span> <span class="k">AS</span> <span class="n">totalSale</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">WHERE</span> <span class="n">orderTime</span> <span class="k">BETWEEN</span> <span class="s1">'2018-01-01 00:00:00'</span> <span class="k">AND</span> <span class="s1">'2018-12-31 23:59:59'</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">itemId</span></code></pre></figure>

<h2 id="creating-a-function">Creating a Function</h2>

<p>The following example shows how to create a function via DDL.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">-- The function `myConcat` references to the scalar function class `a.b.c.MyConcatScalarFunc` which is written in Java and it's jar file is included in the compilation class path.</span>
<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">myConcat</span> <span class="k">AS</span> <span class="s1">'a.b.c.MyConcatScalarFunc'</span></code></pre></figure>

<h2 id="supported-ddl-syntax">Supported DDL Syntax</h2>

<p>The following BNF-grammar describes the superset of supported DDL features in batch and streaming SQL.</p>

<h3 id="create-table">CREATE TABLE</h3>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">createTable</span><span class="p">:</span>
  <span class="k">CREATE</span> <span class="k">TABLE</span> <span class="n">tablename</span> <span class="s1">'('</span>
    <span class="n">columnDefinition</span> <span class="p">[,</span> <span class="n">columnDefinition</span> <span class="p">]</span><span class="o">*</span>
    <span class="n">columnDefinition</span> <span class="p">[,</span> <span class="n">columnDefinition</span> <span class="p">]</span><span class="o">*</span>
    <span class="p">[</span> <span class="n">computedColumnDefinition</span> <span class="p">[,</span> <span class="n">computedColumnDefinition</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">tableConstraint</span> <span class="p">[,</span> <span class="n">tableConstraint</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">tableIndex</span> <span class="p">[,</span> <span class="n">tableIndex</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
    <span class="p">[</span> <span class="n">WATERMARK</span> <span class="n">watermarkName</span> <span class="k">FOR</span> <span class="n">rowtimeField</span> <span class="k">AS</span> <span class="n">withOffset</span> <span class="s1">'('</span> <span class="n">rowtimeField</span><span class="p">,</span> <span class="k">offset</span> <span class="s1">')'</span> <span class="p">]</span>
<span class="s1">')'</span> <span class="p">[</span> <span class="k">WITH</span> <span class="s1">'('</span> <span class="n">tableOption</span> <span class="p">[,</span> <span class="n">tableOption</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span>

<span class="n">columnDefinition</span><span class="p">:</span>
  <span class="n">columnName</span> <span class="n">dataType</span> <span class="p">[</span> <span class="k">NOT</span> <span class="k">NULL</span> <span class="p">]</span>

<span class="n">dataType</span><span class="p">:</span>
  <span class="n">VARCHAR</span>
  <span class="o">|</span> <span class="n">BOOLEAN</span>
  <span class="o">|</span> <span class="n">TINYINT</span>
  <span class="o">|</span> <span class="n">SMALLINT</span>
  <span class="o">|</span> <span class="n">INT</span>
  <span class="o">|</span> <span class="n">BIGINT</span>
  <span class="o">|</span> <span class="n">FLOAT</span>
  <span class="o">|</span> <span class="n">DECIMAL</span> <span class="p">[</span> <span class="s1">'('</span> <span class="k">precision</span><span class="p">,</span> <span class="k">scale</span> <span class="s1">')'</span> <span class="p">]</span>
  <span class="o">|</span> <span class="n">DOUBLE</span>
  <span class="o">|</span> <span class="n">DATE</span>
  <span class="o">|</span> <span class="n">TIME</span>
  <span class="o">|</span> <span class="k">TIMESTAMP</span>
  <span class="o">|</span> <span class="n">VARBINARY</span>

<span class="n">computedColumnDefinition</span><span class="p">:</span>
  <span class="n">columnName</span> <span class="k">AS</span> <span class="n">computedColumnExpression</span>

<span class="n">tableConstraint</span><span class="p">:</span>
  <span class="err">{</span> <span class="k">PRIMARY</span> <span class="k">KEY</span> <span class="o">|</span> <span class="k">UNIQUE</span> <span class="err">}</span> <span class="s1">'('</span> <span class="n">columnName</span> <span class="p">[,</span> <span class="n">columnName</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">tableIndex</span><span class="p">:</span>
  <span class="p">[</span> <span class="k">UNIQUE</span> <span class="p">]</span> <span class="k">INDEX</span> <span class="n">indexName</span> <span class="s1">'('</span> <span class="n">columnName</span> <span class="p">[,</span> <span class="n">columnName</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">rowtimeField</span><span class="p">:</span>
  <span class="n">columnName</span>

<span class="n">tableOption</span><span class="p">:</span>
  <span class="n">property</span><span class="o">=</span><span class="n">value</span>

<span class="k">offset</span><span class="p">:</span>
  <span class="n">positiveInteger</span></code></pre></figure>

<p>DECIMAL type has a default max precision and scale (38, 18) if not declared.</p>

<p>VARBINARY represents an ARRAY type of byte, and other types of ARRAY are not supported yet. Also, the MULTISET type is not supported.</p>

<p>Computed column is a virtual column that defines a calculation (not persist in the table). The column value is calculated at runtime. A computed column can reference columns for calculation.</p>

<p>Table constraint includes PRIMARY KEY and UNIQUE constraints, CHECK constraint is not supported yet.</p>

<p>Table index supports declaring UNIQUE or NON-UNIQUE index column(s).</p>

<p>The unit of the watermark offset is millisecond (or ms).</p>

<h3 id="create-view">CREATE VIEW</h3>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">createView</span><span class="p">:</span>
<span class="k">CREATE</span> <span class="k">VIEW</span> <span class="n">viewName</span>
  <span class="p">[</span> <span class="s1">'('</span> <span class="n">columnName</span> <span class="p">[,</span> <span class="n">columnName</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span>
  <span class="k">AS</span> <span class="n">queryStatement</span></code></pre></figure>

<p>View is not materialized, it is an alias of a query statement.</p>

<h3 id="create-function">CREATE FUNCTION</h3>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">createFunction</span><span class="p">:</span>
<span class="k">CREATE</span> <span class="k">FUNCTION</span> <span class="n">functionName</span>
  <span class="k">AS</span> <span class="n">className</span>

<span class="n">className</span><span class="p">:</span>
  <span class="n">fullyQualifiedName</span></code></pre></figure>

<h2 id="specifying-a-query">Specifying a Query</h2>

<p>The following example shows how to specify SQL queries on registered and inlined tables.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">StreamExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">StreamExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="n">StreamTableEnvironment</span> <span class="n">tableEnv</span> <span class="o">=</span> <span class="n">TableEnvironment</span><span class="o">.</span><span class="na">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>

<span class="c1">// ingest a DataStream from an external source</span>
<span class="n">DataStream</span><span class="o">&lt;</span><span class="n">Tuple3</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">addSource</span><span class="o">(...);</span>

<span class="c1">// SQL query with an inlined (unregistered) table</span>
<span class="n">Table</span> <span class="n">table</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">toTable</span><span class="o">(</span><span class="n">ds</span><span class="o">,</span> <span class="s">"user, product, amount"</span><span class="o">);</span>
<span class="n">Table</span> <span class="n">result</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT SUM(amount) FROM "</span> <span class="o">+</span> <span class="n">table</span> <span class="o">+</span> <span class="s">" WHERE product LIKE '%Rubber%'"</span><span class="o">);</span>

<span class="c1">// SQL query with a registered table</span>
<span class="c1">// register the DataStream as table "Orders"</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="s">"user, product, amount"</span><span class="o">);</span>
<span class="c1">// run a SQL query on the Table and retrieve the result as a new Table</span>
<span class="n">Table</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT product, amount FROM Orders WHERE product LIKE '%Rubber%'"</span><span class="o">);</span>

<span class="c1">// SQL update with a registered table</span>
<span class="c1">// create and register a TableSink</span>
<span class="n">TableSink</span> <span class="n">csvSink</span> <span class="o">=</span> <span class="k">new</span> <span class="n">CsvTableSink</span><span class="o">(</span><span class="s">"/path/to/file"</span><span class="o">,</span> <span class="o">...);</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">fieldNames</span> <span class="o">=</span> <span class="o">{</span><span class="s">"product"</span><span class="o">,</span> <span class="s">"amount"</span><span class="o">};</span>
<span class="n">DataType</span><span class="o">[]</span> <span class="n">fieldTypes</span> <span class="o">=</span> <span class="o">{</span><span class="n">DataTypes</span><span class="o">.</span><span class="na">STRING</span><span class="o">,</span> <span class="n">DataTypes</span><span class="o">.</span><span class="na">INT</span><span class="o">};</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">registerTableSink</span><span class="o">(</span><span class="s">"RubberOrders"</span><span class="o">,</span> <span class="n">fieldNames</span><span class="o">,</span> <span class="n">fieldTypes</span><span class="o">,</span> <span class="n">csvSink</span><span class="o">);</span>
<span class="c1">// run a SQL update query on the Table and emit the result to the TableSink</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlUpdate</span><span class="o">(</span>
  <span class="s">"INSERT INTO RubberOrders SELECT product, amount FROM Orders WHERE product LIKE '%Rubber%'"</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">env</span> <span class="k">=</span> <span class="nc">StreamExecutionEnvironment</span><span class="o">.</span><span class="n">getExecutionEnvironment</span>
<span class="k">val</span> <span class="n">tableEnv</span> <span class="k">=</span> <span class="nc">TableEnvironment</span><span class="o">.</span><span class="n">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>

<span class="c1">// read a DataStream from an external source
</span><span class="k">val</span> <span class="n">ds</span><span class="k">:</span> <span class="kt">DataStream</span><span class="o">[(</span><span class="kt">Long</span>, <span class="kt">String</span>, <span class="kt">Integer</span><span class="o">)]</span> <span class="k">=</span> <span class="n">env</span><span class="o">.</span><span class="n">addSource</span><span class="o">(...)</span>

<span class="c1">// SQL query with an inlined (unregistered) table
</span><span class="k">val</span> <span class="n">table</span> <span class="k">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">toTable</span><span class="o">(</span><span class="n">tableEnv</span><span class="o">,</span> <span class="ss">'user,</span> <span class="ss">'product,</span> <span class="ss">'amount)</span>
<span class="k">val</span> <span class="n">result</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
  <span class="n">s</span><span class="s">"SELECT SUM(amount) FROM $table WHERE product LIKE '%Rubber%'"</span><span class="o">)</span>

<span class="c1">// SQL query with a registered table
// register the DataStream under the name "Orders"
</span><span class="n">tableEnv</span><span class="o">.</span><span class="n">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="ss">'user,</span> <span class="ss">'product,</span> <span class="ss">'amount)</span>
<span class="c1">// run a SQL query on the Table and retrieve the result as a new Table
</span><span class="k">val</span> <span class="n">result2</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT product, amount FROM Orders WHERE product LIKE '%Rubber%'"</span><span class="o">)</span>

<span class="c1">// SQL update with a registered table
// create and register a TableSink
</span><span class="nc">TableSink</span> <span class="n">csvSink</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">CsvTableSink</span><span class="o">(</span><span class="s">"/path/to/file"</span><span class="o">,</span> <span class="o">...)</span>
<span class="k">val</span> <span class="n">fieldNames</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="s">"product"</span><span class="o">,</span> <span class="s">"amount"</span><span class="o">)</span>
<span class="k">val</span> <span class="n">fieldTypes</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">DataType</span><span class="o">[</span><span class="k">_</span><span class="o">]]</span> <span class="k">=</span> <span class="nc">Array</span><span class="o">(</span><span class="nc">DataTypes</span><span class="o">.</span><span class="nc">STRING</span><span class="o">,</span> <span class="nc">DataTypes</span><span class="o">.</span><span class="nc">INT</span><span class="o">)</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="n">registerTableSink</span><span class="o">(</span><span class="s">"RubberOrders"</span><span class="o">,</span> <span class="n">fieldNames</span><span class="o">,</span> <span class="n">fieldTypes</span><span class="o">,</span> <span class="n">csvSink</span><span class="o">)</span>
<span class="c1">// run a SQL update query on the Table and emit the result to the TableSink
</span><span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlUpdate</span><span class="o">(</span>
  <span class="s">"INSERT INTO RubberOrders SELECT product, amount FROM Orders WHERE product LIKE '%Rubber%'"</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="supported-query-syntax">Supported Query Syntax</h2>

<p>Flink parses SQL using <a href="https://calcite.apache.org/docs/reference.html">Apache Calcite</a>, which supports standard ANSI SQL.</p>

<p>The following BNF-grammar describes the superset of supported SQL features in batch and streaming queries. The <a href="#operations">Operations</a> section shows examples for the supported features and indicates which features are only supported for batch or streaming queries.</p>

<h3 id="queries">Queries</h3>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">query</span><span class="p">:</span>
  <span class="k">values</span>
  <span class="o">|</span> <span class="err">{</span>
      <span class="k">select</span>
      <span class="o">|</span> <span class="n">selectWithoutFrom</span>
      <span class="o">|</span> <span class="n">query</span> <span class="k">UNION</span> <span class="p">[</span> <span class="k">ALL</span> <span class="p">]</span> <span class="n">query</span>
      <span class="o">|</span> <span class="n">query</span> <span class="k">EXCEPT</span> <span class="n">query</span>
      <span class="o">|</span> <span class="n">query</span> <span class="k">INTERSECT</span> <span class="n">query</span>
    <span class="err">}</span>
    <span class="p">[</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderItem</span> <span class="p">[,</span> <span class="n">orderItem</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
    <span class="p">[</span> <span class="k">LIMIT</span> <span class="err">{</span> <span class="k">count</span> <span class="o">|</span> <span class="k">ALL</span> <span class="err">}</span> <span class="p">]</span>
    <span class="p">[</span> <span class="k">OFFSET</span> <span class="k">start</span> <span class="err">{</span> <span class="k">ROW</span> <span class="o">|</span> <span class="k">ROWS</span> <span class="err">}</span> <span class="p">]</span>
    <span class="p">[</span> <span class="k">FETCH</span> <span class="err">{</span> <span class="k">FIRST</span> <span class="o">|</span> <span class="k">NEXT</span> <span class="err">}</span> <span class="p">[</span> <span class="k">count</span> <span class="p">]</span> <span class="err">{</span> <span class="k">ROW</span> <span class="o">|</span> <span class="k">ROWS</span> <span class="err">}</span> <span class="k">ONLY</span> <span class="p">]</span>

<span class="n">orderItem</span><span class="p">:</span>
  <span class="n">expression</span> <span class="p">[</span> <span class="k">ASC</span> <span class="o">|</span> <span class="k">DESC</span> <span class="p">]</span>

<span class="k">select</span><span class="p">:</span>
  <span class="k">SELECT</span> <span class="p">[</span> <span class="k">ALL</span> <span class="o">|</span> <span class="k">DISTINCT</span> <span class="p">]</span>
  <span class="err">{</span> <span class="s1">'*'</span> <span class="o">|</span> <span class="n">projectItem</span> <span class="p">[,</span> <span class="n">projectItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span>
  <span class="k">FROM</span> <span class="err">{</span> <span class="n">tableExpression</span> <span class="o">|</span> <span class="k">values</span> <span class="err">}</span>
  <span class="p">[</span> <span class="k">WHERE</span> <span class="n">booleanExpression</span> <span class="p">]</span>
  <span class="p">[</span> <span class="k">GROUP</span> <span class="k">BY</span> <span class="err">{</span> <span class="n">groupItem</span> <span class="p">[,</span> <span class="n">groupItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span> <span class="p">]</span>
  <span class="p">[</span> <span class="k">HAVING</span> <span class="n">booleanExpression</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">WINDOW</span> <span class="n">windowName</span> <span class="k">AS</span> <span class="n">windowSpec</span> <span class="p">[,</span> <span class="n">windowName</span> <span class="k">AS</span> <span class="n">windowSpec</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>

<span class="n">selectWithoutFrom</span><span class="p">:</span>
  <span class="k">SELECT</span> <span class="p">[</span> <span class="k">ALL</span> <span class="o">|</span> <span class="k">DISTINCT</span> <span class="p">]</span>
  <span class="err">{</span> <span class="s1">'*'</span> <span class="o">|</span> <span class="n">projectItem</span> <span class="p">[,</span> <span class="n">projectItem</span> <span class="p">]</span><span class="o">*</span> <span class="err">}</span>

<span class="n">projectItem</span><span class="p">:</span>
  <span class="n">expression</span> <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="n">columnAlias</span> <span class="p">]</span>
  <span class="o">|</span> <span class="n">tableAlias</span> <span class="p">.</span> <span class="s1">'*'</span>

<span class="n">tableExpression</span><span class="p">:</span>
  <span class="n">tableReference</span> <span class="p">[,</span> <span class="n">tableReference</span> <span class="p">]</span><span class="o">*</span>
  <span class="o">|</span> <span class="n">tableExpression</span> <span class="p">[</span> <span class="k">NATURAL</span> <span class="p">]</span> <span class="p">[</span> <span class="k">LEFT</span> <span class="o">|</span> <span class="k">RIGHT</span> <span class="o">|</span> <span class="k">FULL</span> <span class="p">]</span> <span class="k">JOIN</span> <span class="n">tableExpression</span> <span class="p">[</span> <span class="n">joinCondition</span> <span class="p">]</span>

<span class="n">joinCondition</span><span class="p">:</span>
  <span class="k">ON</span> <span class="n">booleanExpression</span>
  <span class="o">|</span> <span class="k">USING</span> <span class="s1">'('</span> <span class="k">column</span> <span class="p">[,</span> <span class="k">column</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">tableReference</span><span class="p">:</span>
  <span class="n">tablePrimary</span>
  <span class="p">[</span> <span class="n">matchRecognize</span> <span class="p">]</span>
  <span class="p">[</span> <span class="p">[</span> <span class="k">AS</span> <span class="p">]</span> <span class="k">alias</span> <span class="p">[</span> <span class="s1">'('</span> <span class="n">columnAlias</span> <span class="p">[,</span> <span class="n">columnAlias</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="p">]</span> <span class="p">]</span>

<span class="n">tablePrimary</span><span class="p">:</span>
  <span class="p">[</span> <span class="k">TABLE</span> <span class="p">]</span> <span class="p">[</span> <span class="p">[</span> <span class="n">catalogName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">schemaName</span> <span class="p">.</span> <span class="p">]</span> <span class="n">tableName</span> <span class="p">[</span> <span class="k">WITH</span> <span class="p">(</span> <span class="n">tableOption</span> <span class="p">[,</span> <span class="n">tableOption</span><span class="p">]</span><span class="o">*</span> <span class="p">)</span> <span class="p">]</span>
  <span class="o">|</span> <span class="k">LATERAL</span> <span class="k">TABLE</span> <span class="s1">'('</span> <span class="n">functionName</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span> <span class="s1">')'</span>
  <span class="o">|</span> <span class="k">UNNEST</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="s1">')'</span>

<span class="k">values</span><span class="p">:</span>
  <span class="k">VALUES</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span>

<span class="n">groupItem</span><span class="p">:</span>
  <span class="n">expression</span>
  <span class="o">|</span> <span class="s1">'('</span> <span class="s1">')'</span>
  <span class="o">|</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span> <span class="k">CUBE</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span> <span class="k">ROLLUP</span> <span class="s1">'('</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>
  <span class="o">|</span> <span class="k">GROUPING</span> <span class="k">SETS</span> <span class="s1">'('</span> <span class="n">groupItem</span> <span class="p">[,</span> <span class="n">groupItem</span> <span class="p">]</span><span class="o">*</span> <span class="s1">')'</span>

<span class="n">windowRef</span><span class="p">:</span>
  <span class="n">windowName</span>
  <span class="o">|</span> <span class="n">windowSpec</span>

<span class="n">windowSpec</span><span class="p">:</span>
  <span class="p">[</span> <span class="n">windowName</span> <span class="p">]</span>
  <span class="s1">'('</span>
  <span class="p">[</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderItem</span> <span class="p">[,</span> <span class="n">orderItem</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
  <span class="p">[</span>
    <span class="n">RANGE</span> <span class="n">numericOrIntervalExpression</span> <span class="p">[</span> <span class="n">PRECEDING</span> <span class="p">]</span>
    <span class="o">|</span> <span class="k">ROWS</span> <span class="n">numericExpression</span> <span class="p">[</span> <span class="n">PRECEDING</span> <span class="p">]</span>
  <span class="p">]</span>
  <span class="s1">')'</span>

<span class="n">matchRecognize</span><span class="p">:</span>
  <span class="n">MATCH_RECOGNIZE</span> <span class="s1">'('</span>
  <span class="p">[</span> <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">expression</span> <span class="p">[,</span> <span class="n">expression</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
  <span class="p">[</span> <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderItem</span> <span class="p">[,</span> <span class="n">orderItem</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">MEASURES</span> <span class="n">measureColumn</span> <span class="p">[,</span> <span class="n">measureColumn</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>
  <span class="p">[</span> <span class="n">ONE</span> <span class="k">ROW</span> <span class="n">PER</span> <span class="k">MATCH</span> <span class="p">]</span>
  <span class="p">[</span> <span class="k">AFTER</span> <span class="k">MATCH</span>
    <span class="err">{</span>
      <span class="n">SKIP</span> <span class="k">TO</span> <span class="k">NEXT</span> <span class="k">ROW</span>
      <span class="o">|</span> <span class="n">SKIP</span> <span class="n">PAST</span> <span class="k">LAST</span> <span class="k">ROW</span>
      <span class="o">|</span> <span class="n">SKIP</span> <span class="k">TO</span> <span class="k">FIRST</span> <span class="k">variable</span>
      <span class="o">|</span> <span class="n">SKIP</span> <span class="k">TO</span> <span class="k">LAST</span> <span class="k">variable</span>
      <span class="o">|</span> <span class="n">SKIP</span> <span class="k">TO</span> <span class="k">variable</span>
    <span class="err">}</span>
  <span class="p">]</span>
  <span class="n">PATTERN</span> <span class="s1">'('</span> <span class="n">pattern</span> <span class="s1">')'</span>
  <span class="p">[</span> <span class="n">WITHIN</span> <span class="n">intervalLiteral</span> <span class="p">]</span>
  <span class="n">DEFINE</span> <span class="k">variable</span> <span class="k">AS</span> <span class="n">condition</span> <span class="p">[,</span> <span class="k">variable</span> <span class="k">AS</span> <span class="n">condition</span> <span class="p">]</span><span class="o">*</span>
  <span class="s1">')'</span>

<span class="n">measureColumn</span><span class="p">:</span>
  <span class="n">expression</span> <span class="k">AS</span> <span class="k">alias</span>

<span class="n">pattern</span><span class="p">:</span>
  <span class="n">patternTerm</span> <span class="p">[</span> <span class="s1">'|'</span> <span class="n">patternTerm</span> <span class="p">]</span><span class="o">*</span>

<span class="n">patternTerm</span><span class="p">:</span>
  <span class="n">patternFactor</span> <span class="p">[</span> <span class="n">patternFactor</span> <span class="p">]</span><span class="o">*</span>

<span class="n">patternFactor</span><span class="p">:</span>
  <span class="k">variable</span> <span class="p">[</span> <span class="n">patternQuantifier</span> <span class="p">]</span>

<span class="n">patternQuantifier</span><span class="p">:</span>
  <span class="s1">'*'</span>
  <span class="o">|</span> <span class="s1">'*?'</span>
  <span class="o">|</span> <span class="s1">'+'</span>
  <span class="o">|</span> <span class="s1">'+?'</span>
  <span class="o">|</span> <span class="s1">'?'</span>
  <span class="o">|</span> <span class="s1">'??'</span>
  <span class="o">|</span> <span class="s1">'{'</span> <span class="err">{</span> <span class="p">[</span> <span class="n">minRepeat</span> <span class="p">],</span> <span class="p">[</span> <span class="n">maxRepeat</span> <span class="p">]</span> <span class="err">}</span> <span class="s1">'}'</span> <span class="p">[</span> <span class="s1">'?'</span> <span class="p">]</span>
  <span class="o">|</span> <span class="s1">'{'</span> <span class="n">repeat</span> <span class="s1">'}'</span></code></pre></figure>

<p>Table options can not only be specified in DDL but also be specified in query statements.</p>

<h2 id="supported-dml-syntax">Supported DML Syntax</h2>

<h3 id="dml-insert-only">DML (Insert Only)</h3>

<p>The following BNF-grammar describes the superset of supported SQL features in batch and streaming queries. Currently, only INSERT operation is supported.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">insert</span><span class="p">:</span>
  <span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">tableReference</span>
  <span class="n">query</span>
  <span class="p">[</span> <span class="n">EMIT</span> <span class="n">strategy</span> <span class="p">[,</span> <span class="n">strategy</span> <span class="p">]</span><span class="o">*</span> <span class="p">]</span>

<span class="n">strategy</span><span class="p">:</span>
  <span class="err">{</span> <span class="k">WITH</span> <span class="n">DELAY</span> <span class="n">timeInterval</span> <span class="o">|</span> <span class="k">WITHOUT</span> <span class="n">DELAY</span> <span class="err">}</span>
  <span class="p">[</span> <span class="k">BEFORE</span> <span class="n">WATERMARK</span> <span class="o">|</span> <span class="k">AFTER</span> <span class="n">WATERMARK</span> <span class="p">]</span>

<span class="n">timeInterval</span><span class="p">:</span>
  <span class="s1">'string'</span> <span class="n">timeUnit</span></code></pre></figure>

<p><strong>Note:</strong> The EMIT clause is only valid for window queries currently. See more about <a href="sql.html#emit-strategy">EMIT Strategy</a> in window queries.</p>

<p>Flink SQL uses a lexical policy for identifier (table, attribute, function names) similar to Java:</p>

<ul>
  <li>The case of identifiers is preserved whether or not they are quoted.</li>
  <li>After which, identifiers are matched case-sensitively.</li>
  <li>Unlike Java, back-ticks allow identifiers to contain non-alphanumeric characters (e.g. <code class="highlighter-rouge">"SELECT a AS </code>my field<code class="highlighter-rouge"> FROM t"</code>).</li>
</ul>

<p>String literals must be enclosed in single quotes (e.g., <code class="highlighter-rouge">SELECT 'Hello World'</code>). Duplicate a single quote for escaping (e.g., <code class="highlighter-rouge">SELECT 'It''s me.'</code>). Unicode characters are supported in string literals. If explicit unicode code points are required, use the following syntax:</p>

<ul>
  <li>Use the backslash (<code class="highlighter-rouge">\</code>) as escaping character (default): <code class="highlighter-rouge">SELECT U&amp;'\263A'</code></li>
  <li>Use a custom escaping character: <code class="highlighter-rouge">SELECT U&amp;'#263A' UESCAPE '#'</code></li>
</ul>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="operations">Operations</h2>

<h3 id="show-and-use">Show and Use</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
  	<tr>
  		<td>
        <strong>Show</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
  		<td>
  		<p>Show all catalogs</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SHOW</span> <span class="n">CATALOGS</span><span class="p">;</span></code></pre></figure>

		<p>Show all dbs in the default catalog</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SHOW</span> <span class="n">DATABASES</span><span class="p">;</span></code></pre></figure>

		<p>Show all tables in the default db in default catalog</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SHOW</span> <span class="n">TABLES</span><span class="p">;</span></code></pre></figure>

      </td>
  	</tr>
    <tr>
      <td>
        <strong>Use</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
			<p>Set the default catalog and default database</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">USE</span> <span class="n">mycatalog</span><span class="p">.</span><span class="n">mydb</span></code></pre></figure>

      </td>
    </tr>
  </tbody>
</table>
</div>

<h3 id="scan-projection-and-filter">Scan, Projection and Filter</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
  	<tr>
  		<td>
        <strong>Scan / Select / As</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
  		<td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Orders</span>

<span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="k">c</span> <span class="k">AS</span> <span class="n">d</span> <span class="k">FROM</span> <span class="n">Orders</span></code></pre></figure>

      </td>
  	</tr>
    <tr>
      <td>
        <strong>Where / Filter</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">b</span> <span class="o">=</span> <span class="s1">'red'</span>

<span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td>
        <strong>User-defined Scalar Functions (Scalar UDF)</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
      <p>UDFs must be registered in the <code>TableEnvironment</code>. See the <a href="udfs.html">UDF documentation</a> for details on how to specify and register scalar UDFs.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">PRETTY_PRINT</span><span class="p">(</span><span class="k">user</span><span class="p">)</span> <span class="k">FROM</span> <span class="n">Orders</span></code></pre></figure>

      </td>
    </tr>
  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="aggregations">Aggregations</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>GroupBy Aggregation</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span><br />
        <span class="label label-info">Result Updating</span>
      </td>
      <td>
        <p><b>Note:</b> GroupBy on a streaming table produces an updating result. See the <a href="streaming.html">Streaming Concepts</a> page and <a href="#groupby-aggregation-optimization">GroupBy Aggregation Optmization</a> section for more details about aggregation and optimization meaures.
        </p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">a</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="k">as</span> <span class="n">d</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">a</span></code></pre></figure>

      </td>
    </tr>
    <tr>
    	<td>
        <strong>GroupBy Window Aggregation</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
    	<td>
        <p>Use a group window to compute a single result row per group. See <a href="#group-windows">Group Windows</a> section for more details.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">user</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">TUMBLE</span><span class="p">(</span><span class="n">rowtime</span><span class="p">,</span> <span class="n">INTERVAL</span> <span class="s1">'1'</span> <span class="k">DAY</span><span class="p">),</span> <span class="k">user</span></code></pre></figure>

      </td>
    </tr>
    <tr>
    	<td>
        <strong>Over Window aggregation</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
    	<td>
        <p>Over window aggregations are supported differently for streaming and batch queries.</p>
        <ul>
          <li>For streaming queries, all aggregates must be defined over the same window, i.e., same partitioning, sorting, and range. Currently, only windows with PRECEDING (UNBOUNDED and bounded) to CURRENT ROW range are supported. Ranges with FOLLOWING are not supported yet. ORDER BY must be specified on a single <a href="streaming.html#time-attributes">time attribute</a>. Besides, TOPN is also implemented based on Over Window Aggregation. See <a href="streaming.html#topn"> TOPN </a> for more details.</li>
          <li>For batch queries, aggregates can be defined over different windows. Ranges with FOLLOWING are supported. ORDER BY can be specified on any column.</li>
        </ul>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="n">OVER</span> <span class="p">(</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="k">user</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">proctime</span>
  <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="mi">2</span> <span class="n">PRECEDING</span> <span class="k">AND</span> <span class="k">CURRENT</span> <span class="k">ROW</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Orders</span>

<span class="k">SELECT</span> <span class="k">COUNT</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="n">OVER</span> <span class="n">w</span><span class="p">,</span> <span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="n">OVER</span> <span class="n">w</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="n">WINDOW</span> <span class="n">w</span> <span class="k">AS</span> <span class="p">(</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="k">user</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">proctime</span>
  <span class="k">ROWS</span> <span class="k">BETWEEN</span> <span class="mi">2</span> <span class="n">PRECEDING</span> <span class="k">AND</span> <span class="k">CURRENT</span> <span class="k">ROW</span><span class="p">)</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td>
        <strong>Distinct</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span> <br />
        <span class="label label-info">Result Updating</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">DISTINCT</span> <span class="n">users</span> <span class="k">FROM</span> <span class="n">Orders</span></code></pre></figure>

       <p><b>Note:</b> For streaming queries the required state to compute the query result might grow infinitely depending on the number of distinct fields. Please provide a query configuration with valid retention interval to prevent excessive state size. See <a href="streaming.html">Streaming Concepts</a> for details.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>Grouping Sets, Rollup, Cube</strong><br />
        <span class="label label-primary">Batch</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="k">GROUPING</span> <span class="k">SETS</span> <span class="p">((</span><span class="k">user</span><span class="p">),</span> <span class="p">(</span><span class="n">product</span><span class="p">))</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td>
        <strong>Having</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">users</span>
<span class="k">HAVING</span> <span class="k">SUM</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">50</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td>
        <strong>User-defined Aggregate Functions (UDAGG)</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>UDAGGs must be registered in the <code>TableEnvironment</code>. See the <a href="udfs.html">UDF documentation</a> for details on how to specify and register UDAGGs.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">MyAggregate</span><span class="p">(</span><span class="n">amount</span><span class="p">)</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="n">users</span></code></pre></figure>

      </td>
    </tr>
  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="joins">Joins</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Inner Equi-join</strong><br />
        <span class="label label-primary">Batch</span>
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>Currently, only equi-joins are supported, i.e., joins that have at least one conjunctive condition with an equality predicate. Arbitrary cross or theta joins are not supported.</p>
        <p><b>Note:</b> Joins without equality predicates are supported for batch queries (implemented with nested loop joins).</p>
        <p><b>Note:</b> The order of joins is not optimized if join-reorder is disabled (<code>sql.cbo.joinReorder.enabled</code> is false). Tables are joined in the order in which they are specified in the FROM clause. Make sure to specify tables in an order that does not yield a cross join (Cartesian product) which are not supported and would cause a query to fail. If join-reorder is enabled(`sql.cbo.joinReorder.enabled` is true), the optimizer will try to find best join order based on cost.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">INNER</span> <span class="k">JOIN</span> <span class="n">Product</span> <span class="k">ON</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span></code></pre></figure>

<p><b>Note:</b> For streaming queries the required state to compute the query result might grow infinitely depending on the number of distinct input rows. Please provide a query configuration with valid retention interval to prevent excessive state size. See <a href="streaming.html">Streaming Concepts</a> for details.</p>
      </td>
    </tr>
    <tr>
      <td><strong>Outer Join</strong><br />
        <span class="label label-primary">Batch</span>
      </td>
      <td>
        <p><b>Note:</b> Joins without equality predicates are supported for batch queries (implemented with nested loop joins).</p>
        <p><b>Note:</b> The order of joins is not optimized. Tables are joined in the order in which they are specified in the FROM clause. Make sure to specify tables in an order that does not yield a cross join (Cartesian product) which are not supported and would cause a query to fail.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="n">Product</span> <span class="k">ON</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span>

<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">RIGHT</span> <span class="k">JOIN</span> <span class="n">Product</span> <span class="k">ON</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span>

<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">FULL</span> <span class="k">OUTER</span> <span class="k">JOIN</span> <span class="n">Product</span> <span class="k">ON</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td><strong>Time-windowed Join</strong><br />
        <span class="label label-primary">Batch</span>
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p><b>Note:</b> Time-windowed joins are a subset of regular joins that can be processed in a streaming fashion.</p>

        <p>A time-windowed join requires at least one equi-join predicate and a join condition that bounds the time on both sides. Such a condition can be defined by two appropriate range predicates (<code>&lt;, &lt;=, &gt;=, &gt;</code>), a <code>BETWEEN</code> predicate, or a single equality predicate that compares <a href="streaming.html#time-attributes">time attributes</a> of the same type (i.e., processing time or event time) of both input tables.</p>
        <p>For example, the following predicates are valid window join conditions:</p>

        <ul>
          <li><code>ltime = rtime</code></li>
          <li><code>ltime &gt;= rtime AND ltime &lt; rtime + INTERVAL '10' MINUTE</code></li>
          <li><code>ltime BETWEEN rtime - INTERVAL '10' SECOND AND rtime + INTERVAL '5' SECOND</code></li>
        </ul>


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="n">o</span><span class="p">,</span> <span class="n">Shipments</span> <span class="n">s</span>
<span class="k">WHERE</span> <span class="n">o</span><span class="p">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">orderId</span> <span class="k">AND</span>
      <span class="n">o</span><span class="p">.</span><span class="n">ordertime</span> <span class="k">BETWEEN</span> <span class="n">s</span><span class="p">.</span><span class="n">shiptime</span> <span class="o">-</span> <span class="n">INTERVAL</span> <span class="s1">'4'</span> <span class="n">HOUR</span> <span class="k">AND</span> <span class="n">s</span><span class="p">.</span><span class="n">shiptime</span></code></pre></figure>


The example above will join all orders with their corresponding shipments if the order was shipped four hours after the order was received.
      </td>
    </tr>
    <tr>
    	<td>
        <strong>Expanding arrays into a relation</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
    	<td>
        <p>Unnesting WITH ORDINALITY is not supported yet.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">users</span><span class="p">,</span> <span class="n">tag</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">CROSS</span> <span class="k">JOIN</span> <span class="k">UNNEST</span><span class="p">(</span><span class="n">tags</span><span class="p">)</span> <span class="k">AS</span> <span class="n">t</span> <span class="p">(</span><span class="n">tag</span><span class="p">)</span></code></pre></figure>

      </td>
    </tr>
    <tr>
    	<td>
        <strong>Join with User Defined Table Functions (UDTF)</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
    	<td>
      <p>UDTFs must be registered in the <code>TableEnvironment</code>. See the <a href="udfs.html">UDF documentation</a> for details on how to specify and register UDTFs. </p>
      <p>Inner Join</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">users</span><span class="p">,</span> <span class="n">tag</span>
<span class="k">FROM</span> <span class="n">Orders</span><span class="p">,</span> <span class="k">LATERAL</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">unnest_udtf</span><span class="p">(</span><span class="n">tags</span><span class="p">))</span> <span class="n">t</span> <span class="k">AS</span> <span class="n">tag</span></code></pre></figure>

      <p>Left Outer Join</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">users</span><span class="p">,</span> <span class="n">tag</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">LEFT</span> <span class="k">JOIN</span> <span class="k">LATERAL</span> <span class="k">TABLE</span><span class="p">(</span><span class="n">unnest_udtf</span><span class="p">(</span><span class="n">tags</span><span class="p">))</span> <span class="n">t</span> <span class="k">AS</span> <span class="n">tag</span> <span class="k">ON</span> <span class="k">TRUE</span></code></pre></figure>


<p><b>Note:</b> Currently, only literal <code>TRUE</code> is supported as predicate for a left outer join against a lateral table.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>Join with Temporal Table Function</strong><br />
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p><a href="streaming/temporal_tables.html">Temporal Table Functions</a> are tables that track changes over time.
        A <a href="streaming/temporal_tables.html#temporal-table-functions">Temporal Table Function</a> provides access to the state of a temporal table at a specific point in time.
        The syntax to join a table with a temporal table function is the same as in join with table functions.</p>

        <p>Currently only inner joins with temporal tables are supported.</p>
        <p>The following example assumes that <strong>Rates</strong> is a <a href="streaming/temporal_tables.html#temporal-table-functions">Temporal Table Function</a>.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span>
  <span class="n">o_amount</span><span class="p">,</span> <span class="n">r_rate</span>
<span class="k">FROM</span>
  <span class="n">Orders</span><span class="p">,</span>
  <span class="k">LATERAL</span> <span class="k">TABLE</span> <span class="p">(</span><span class="n">Rates</span><span class="p">(</span><span class="n">o_proctime</span><span class="p">))</span>
<span class="k">WHERE</span>
  <span class="n">r_currency</span> <span class="o">=</span> <span class="n">o_currency</span></code></pre></figure>

        <p>For more information please check the more detailed <a href="streaming/temporal_tables.html">Temporal Tables</a> concept description.</p>
      </td>
    </tr>
    <tr>
      <td>
        <strong>Join with Temporal Table</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p><a href="streaming/temporal_tables.html">Temporal Tables</a> are tables that track changes over time.
        A <a href="streaming/temporal_tables.html#temporal-table">Temporal Table</a> provides access to the versions of a temporal table at a specific point in time.</p>

        <p>Only inner and left joins with processing-time temporal tables are supported.</p>
        <p>The following example assumes that <strong>LatestRates</strong> is a <a href="streaming/temporal_tables.html#temporal-table">Temporal Table</a> which is usually an external database table (dimension table).</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span>
  <span class="n">o</span><span class="p">.</span><span class="n">amout</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">currency</span><span class="p">,</span> <span class="n">r</span><span class="p">.</span><span class="n">rate</span><span class="p">,</span> <span class="n">o</span><span class="p">.</span><span class="n">amount</span> <span class="o">*</span> <span class="n">r</span><span class="p">.</span><span class="n">rate</span>
<span class="k">FROM</span>
  <span class="n">Orders</span> <span class="k">AS</span> <span class="n">o</span>
  <span class="k">JOIN</span> <span class="n">LatestRates</span> <span class="k">FOR</span> <span class="n">SYSTEM_TIME</span> <span class="k">AS</span> <span class="k">OF</span> <span class="n">o</span><span class="p">.</span><span class="n">proctime</span> <span class="k">AS</span> <span class="n">r</span>
  <span class="k">ON</span> <span class="n">r</span><span class="p">.</span><span class="n">currency</span> <span class="o">=</span> <span class="n">o</span><span class="p">.</span><span class="n">currency</span></code></pre></figure>

        <p>For more information please check the more detailed <a href="streaming/temporal_tables.html">Temporal Tables</a> concept description.</p>
      </td>
    </tr>
    <tr>
      <td><strong>Left Semi-Join</strong><br />
        <span class="label label-primary">Batch</span>
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>The left semi-join is a joining similar to the natural join, and only returns the rows of the left table where it can find a match in the right table. Sub-queries using <b>IN</b> and <b>EXISTS</b> will be converted to left semi-joins.</p>
        <p><b>Note:</b> IN and EXISTS in conjunctive condition is supported.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="k">IN</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span> <span class="k">FROM</span> <span class="n">Product</span><span class="p">)</span> <span class="k">AND</span> <span class="n">Orders</span><span class="p">.</span><span class="n">ordertime</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>

<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="k">EXISTS</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Product</span> <span class="k">WHERE</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">AND</span> <span class="n">Orders</span><span class="p">.</span><span class="n">ordertime</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td><strong>Left Anti-Join</strong><br />
        <span class="label label-primary">Batch</span>
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>The left anti-join is a joining similar to the left semi-join, and only returns the rows of the left table where it can <b>not</b> find a match in the right table. Sub-queries using <b>NOT IN</b> and <b>NOT EXISTS</b> will be converted to left anti-joins.</p>
        <p><b>Note:</b> NOT IN and NOT EXISTS in conjunctive condition are supported.</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="k">NOT</span> <span class="k">IN</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span> <span class="k">FROM</span> <span class="n">Product</span><span class="p">)</span> <span class="k">AND</span> <span class="n">Orders</span><span class="p">.</span><span class="n">ordertime</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span>

<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="k">NOT</span> <span class="k">EXISTS</span>
<span class="p">(</span><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">Product</span> <span class="k">WHERE</span> <span class="n">Orders</span><span class="p">.</span><span class="n">productId</span> <span class="o">=</span> <span class="n">Product</span><span class="p">.</span><span class="n">id</span><span class="p">)</span> <span class="k">AND</span> <span class="n">Orders</span><span class="p">.</span><span class="n">ordertime</span> <span class="k">IS</span> <span class="k">NOT</span> <span class="k">NULL</span></code></pre></figure>

      </td>
    </tr>

  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="topn">TOPN</h3>
<p>TOPN is used to calculate the maximum/minimum <var>N</var> records in a stream. It can be flexibly completed based on OVER window aggregation. The grammar is shown as below:</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="p">(</span>
   <span class="k">SELECT</span> <span class="o">*</span> <span class="p">,</span>
   <span class="n">ROW_NUMBER</span><span class="p">()</span> <span class="n">OVER</span> <span class="p">([</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">col1</span><span class="p">[,</span> <span class="n">col2</span><span class="p">..]</span>
   <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">col1</span> <span class="p">[</span><span class="k">asc</span><span class="o">|</span><span class="k">desc</span><span class="p">][,</span> <span class="n">col2</span> <span class="p">[</span><span class="k">asc</span><span class="o">|</span><span class="k">desc</span><span class="p">]...])</span> <span class="k">AS</span> <span class="n">rownum</span>
   <span class="k">FROM</span> <span class="k">table_name</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="n">rownum</span> <span class="o">&lt;=</span> <span class="n">N</span> <span class="p">[</span><span class="k">AND</span> <span class="n">conditions</span><span class="p">]</span></code></pre></figure>

<p><strong>Parameter Specification</strong></p>
<ul>
  <li>ROW_NUMBER(): An over window function to calculate the row number, starting from 1.</li>
  <li>PARTITION BY col1[, col2..]: Specifying the columns by which the records are partitioned.</li>
  <li>ORDER BY col1[,asc|desc] [, col2 [asc|desc]…]: Specifying the columns by which the records are ordered. The ordering directions can be different on different columns.</li>
</ul>

<p>Flink SQL will sort the input data stream according to the order key, so if the top <var>N</var> records have been changed, the changed ones will be sent as retract records to downstream. In addition, if the top <var>N</var> records need to be stored in external storage, the result table must be defined with a primary key.</p>

<p><strong>NOTE</strong>: The usage of TOPN has some constraints. To enable Flink SQL to recognize that this query is a TOPN query, the <code class="highlighter-rouge">where rownum &lt;= N</code> clause is necessary for the outer sql query and cannot be substituted by expressions containing <code class="highlighter-rouge">rownum</code> (for example, <code class="highlighter-rouge">where rownum - 5 &lt;= N</code>). Besides, it is free to add other conditions in the <code class="highlighter-rouge">where</code> clause, but they can only be joined using <code class="highlighter-rouge">and</code>.</p>

<h4 id="no-ranking-number-optimization">No Ranking Number Optimization</h4>
<p>As stated above, the <code class="highlighter-rouge">rownum</code> field will be written into the result table as one field of the primary key, which leads to many duplicate records being written to the result table. For example, when the record of rank 9 is updated and its rank is changed to 1, all the first 9 records will be rewritten to the result table as updating result. If the result table receives too many data, it will become the bottleneck of the SQL job.</p>

<p>The optimization method is discarding <code class="highlighter-rouge">rownum</code> field when writing records to the result table. This is reasonable because the number of the top <var>N</var> records is usually not large, thus the consumers can sort the records themselves quickly. Without <code class="highlighter-rouge">rownum</code> field, in the example above, only the changed record needs to be sent to downstream, which can reduce much burden of the result table.</p>

<p><strong>Grammar</strong></p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span>
<span class="k">FROM</span> <span class="p">(</span>
  <span class="k">SELECT</span> <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span>
    <span class="n">ROW_NUMBER</span><span class="p">()</span> <span class="n">OVER</span> <span class="p">([</span><span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">col1</span><span class="p">[,</span> <span class="n">col2</span><span class="p">..]]</span>
    <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">col1</span> <span class="p">[</span><span class="k">asc</span><span class="o">|</span><span class="k">desc</span><span class="p">][,</span> <span class="n">col2</span> <span class="p">[</span><span class="k">asc</span><span class="o">|</span><span class="k">desc</span><span class="p">]...])</span> <span class="k">AS</span> <span class="n">rownum</span>
  <span class="k">FROM</span> <span class="k">table_name</span><span class="p">)</span>
<span class="k">WHERE</span> <span class="n">rownum</span> <span class="o">&lt;=</span> <span class="n">N</span> <span class="p">[</span><span class="k">AND</span> <span class="n">conditions</span><span class="p">]</span></code></pre></figure>

<p><strong>Note</strong>: When this optimization is enabled, the primary keys of the result table should be consistent with keys of <code class="highlighter-rouge">group by</code> aggregation upstream before TOPN operator. Otherwise, the results may be incorrect.</p>

<p>The following examples show how to specify SQL queries with TOPN on streaming tables.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">StreamExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">StreamExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="n">StreamTableEnvironment</span> <span class="n">tableEnv</span> <span class="o">=</span> <span class="n">TableEnvironment</span><span class="o">.</span><span class="na">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>

<span class="c1">// ingest a DataStream from an external source</span>
<span class="n">DataStream</span><span class="o">&lt;</span><span class="n">Tuple3</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Long</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">addSource</span><span class="o">(...);</span>
<span class="c1">// register the DataStream as table "Orders"</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="s">"category, shopId, num"</span><span class="o">);</span>

<span class="c1">// select top-2 goods of different categories which are sold well</span>
<span class="n">Table</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT * "</span> <span class="o">+</span>
  <span class="s">"FROM ("</span> <span class="o">+</span>
  <span class="s">"   SELECT category, shopId, num,"</span> <span class="o">+</span>
  <span class="s">"       ROW_NUMBER() OVER (PARTITION BY category ORDER BY num DESC) as rank_num"</span> <span class="o">+</span>
  <span class="s">"   FROM T)"</span> <span class="o">+</span>
  <span class="s">"WHERE rank_num &lt;= 2"</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">env</span> <span class="k">=</span> <span class="nc">StreamExecutionEnvironment</span><span class="o">.</span><span class="n">getExecutionEnvironment</span>
<span class="k">val</span> <span class="n">tableEnv</span> <span class="k">=</span> <span class="nc">TableEnvironment</span><span class="o">.</span><span class="n">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>

<span class="c1">// read a DataStream from an external source
</span><span class="k">val</span> <span class="n">ds</span><span class="k">:</span> <span class="kt">DataStream</span><span class="o">[(</span><span class="kt">String</span>, <span class="kt">Long</span>, <span class="kt">Int</span><span class="o">)]</span> <span class="k">=</span> <span class="n">env</span><span class="o">.</span><span class="n">addSource</span><span class="o">(...)</span>
<span class="c1">// register the DataStream under the name "Orders"
</span><span class="n">tableEnv</span><span class="o">.</span><span class="n">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="ss">'category,</span> <span class="ss">'shopId,</span> <span class="ss">'num)</span>


<span class="c1">// select top-2 goods of different categories which are sold well
</span><span class="k">val</span> <span class="n">result1</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT *
      |FROM (
      |   SELECT category, shopId, num,
      |       ROW_NUMBER() OVER (PARTITION BY category ORDER BY num DESC) as rank_num
      |   FROM T)
      |WHERE rank_num &lt;= 2
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="set-operations">Set Operations</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
  	<tr>
      <td>
        <strong>Union</strong><br />
        <span class="label label-primary">Batch</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
  <span class="k">UNION</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span></code></pre></figure>

      </td>
    </tr>
    <tr>
      <td>
        <strong>UnionAll</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
  <span class="k">UNION</span> <span class="k">ALL</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span></code></pre></figure>

      </td>
    </tr>

    <tr>
      <td>
        <strong>Intersect / Except</strong><br />
        <span class="label label-primary">Batch</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
  <span class="k">INTERSECT</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span></code></pre></figure>


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="p">(</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">a</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
  <span class="k">EXCEPT</span>
    <span class="p">(</span><span class="k">SELECT</span> <span class="k">user</span> <span class="k">FROM</span> <span class="n">Orders</span> <span class="k">WHERE</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">)</span></code></pre></figure>

      </td>
    </tr>

    <tr>
      <td>
        <strong>In</strong><br />
        <span class="label label-primary">Batch</span>
      </td>
      <td>
      Returns true if an expression exists in a given table sub-query. The sub-query table must consist of one column. This column must have the same data type as the expression.

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="k">user</span><span class="p">,</span> <span class="n">amount</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">WHERE</span> <span class="n">product</span> <span class="k">IN</span> <span class="p">(</span>
    <span class="k">SELECT</span> <span class="n">product</span> <span class="k">FROM</span> <span class="n">NewProducts</span>
<span class="p">)</span></code></pre></figure>

      </td>
    </tr>
  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="orderby--limit">OrderBy &amp; Limit</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
  	<tr>
      <td>
        <strong>Order By</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
<b>Note:</b> The result of streaming queries can either be sorted on an ascending <a href="streaming.html#time-attributes">time attribute</a> with/without additional sorting attributes, or be sorted on a general attribute in ascending/descending order.


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="c1">--- sort by time attribute ---</span>
<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderTime</span>

<span class="c1">--- universal sort  ---</span>
<span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="n">orderId</span> <span class="k">DESC</span></code></pre></figure>

      </td>
    </tr>

    <tr>
      <td><strong>Limit</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="o">*</span>
<span class="k">FROM</span> <span class="n">Orders</span>
<span class="k">LIMIT</span> <span class="mi">3</span></code></pre></figure>

      </td>
    </tr>

  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="insert">Insert</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>Insert Into</strong><br />
        <span class="label label-primary">Batch</span> <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>Output tables must be registered in the <code>TableEnvironment</code> (see <a href="common.html#register-a-tablesink">Register a TableSink</a>). Moreover, the schema of the registered table must match the schema of the query.</p>


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">OutputTable</span>
<span class="k">SELECT</span> <span class="n">users</span><span class="p">,</span> <span class="n">tag</span>
<span class="k">FROM</span> <span class="n">Orders</span></code></pre></figure>

      </td>
    </tr>

  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="group-windows">Group Windows</h3>

<p>Group windows are defined in the <code class="highlighter-rouge">GROUP BY</code> clause of a SQL query. Just like queries with regular <code class="highlighter-rouge">GROUP BY</code> clauses, queries with a <code class="highlighter-rouge">GROUP BY</code> clause that includes a group window function compute a single result row per group. The following group windows functions are supported for SQL on batch and streaming tables.</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 30%">Group Window Function</th>
      <th class="text-left">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td><code>TUMBLE(time_attr, interval)</code></td>
      <td>Defines a tumbling time window. A tumbling time window assigns rows to non-overlapping, continuous windows with a fixed duration (<code>interval</code>). For example, a tumbling window of 5 minutes groups rows in 5 minutes intervals. Tumbling windows can be defined on event-time (stream + batch) or processing-time (stream).</td>
    </tr>
    <tr>
      <td><code>HOP(time_attr, interval, interval)</code></td>
      <td>Defines a hopping time window (called sliding window in the Table API). A hopping time window has a fixed duration (second <code>interval</code> parameter) and hops by a specified hop interval (first <code>interval</code> parameter). If the hop interval is smaller than the window size, hopping windows are overlapping. Thus, rows can be assigned to multiple windows. For example, a hopping window of 15 minutes size and 5 minute hop interval assigns each row to 3 different windows of 15 minute size, which are evaluated in an interval of 5 minutes. Hopping windows can be defined on event-time (stream + batch) or processing-time (stream).</td>
    </tr>
    <tr>
      <td><code>SESSION(time_attr, interval)</code></td>
      <td>Defines a session time window. Session time windows do not have a fixed duration but their bounds are defined by a time <code>interval</code> of inactivity, i.e., a session window is closed if no event appears for a defined gap period. For example a session window with a 30 minute gap starts when a row is observed after 30 minutes inactivity (otherwise the row would be added to an existing window) and is closed if no row is added within 30 minutes. Session windows can work on event-time (stream + batch) or processing-time (stream).</td>
    </tr>
  </tbody>
</table>

<h4 id="time-attributes">Time Attributes</h4>

<p>For SQL queries on streaming tables, the <code class="highlighter-rouge">time_attr</code> argument of the group window function must refer to a valid time attribute that specifies the processing time or event time of rows. See the <a href="streaming.html#time-attributes">documentation of time attributes</a> to learn how to define time attributes.</p>

<p>For SQL on batch tables, the <code class="highlighter-rouge">time_attr</code> argument of the group window function must be an attribute of type <code class="highlighter-rouge">TIMESTAMP</code>.</p>

<h4 id="selecting-group-window-start-and-end-timestamps">Selecting Group Window Start and End Timestamps</h4>

<p>The start and end timestamps of group windows as well as time attributes can be selected with the following auxiliary functions:</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Auxiliary Function</th>
      <th class="text-left">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        <code>TUMBLE_START(time_attr, interval)</code><br />
        <code>HOP_START(time_attr, interval, interval)</code><br />
        <code>SESSION_START(time_attr, interval)</code><br />
      </td>
      <td><p>Returns the timestamp of the inclusive lower bound of the corresponding tumbling, hopping, or session window.</p></td>
    </tr>
    <tr>
      <td>
        <code>TUMBLE_END(time_attr, interval)</code><br />
        <code>HOP_END(time_attr, interval, interval)</code><br />
        <code>SESSION_END(time_attr, interval)</code><br />
      </td>
      <td><p>Returns the timestamp of the <i>exclusive</i> upper bound of the corresponding tumbling, hopping, or session window.</p>
        <p><b>Note:</b> The exclusive upper bound timestamp <i>cannot</i> be used as a <a href="streaming.html#time-attributes">rowtime attribute</a> in subsequent time-based operations, such as <a href="#joins">time-windowed joins</a> and <a href="#aggregations">group window or over window aggregations</a>.</p></td>
    </tr>
    <tr>
      <td>
        <code>TUMBLE_ROWTIME(time_attr, interval)</code><br />
        <code>HOP_ROWTIME(time_attr, interval, interval)</code><br />
        <code>SESSION_ROWTIME(time_attr, interval)</code><br />
      </td>
      <td><p>Returns the timestamp of the <i>inclusive</i> upper bound of the corresponding tumbling, hopping, or session window.</p>
      <p>The resulting attribute is a <a href="streaming.html#time-attributes">rowtime attribute</a> that can be used in subsequent time-based operations such as <a href="#joins">time-windowed joins</a> and <a href="#aggregations">group window or over window aggregations</a>.</p></td>
    </tr>
    <tr>
      <td>
        <code>TUMBLE_PROCTIME(time_attr, interval)</code><br />
        <code>HOP_PROCTIME(time_attr, interval, interval)</code><br />
        <code>SESSION_PROCTIME(time_attr, interval)</code><br />
      </td>
      <td><p>Returns a <a href="streaming.html#time-attributes">proctime attribute</a> that can be used in subsequent time-based operations such as <a href="#joins">time-windowed joins</a> and <a href="#aggregations">group window or over window aggregations</a>.</p></td>
    </tr>
  </tbody>
</table>

<p><strong>Note:</strong> Auxiliary functions must be called with exactly the same arguments as the group window function in the <code class="highlighter-rouge">GROUP BY</code> clause.</p>

<h4 id="emit-strategy">EMIT Strategy</h4>
<p>The EMIT strategy (such as the allowed latency) of the aggregation result varies in different streaming SQL scenarios. For example, users may desire the functionality that they can get the newest result every minute before the end of an 1 hour tumble window and wait for late data for 1 day after the end of the window. This type of demands are not support in conventional ANSI SQL, thus the Flink SQL grammar is extended to include the EMIT strategy.</p>

<p>The purpose of EMIT strategy is concluded as two aspects:</p>
<ol>
  <li>Control the latency: setting the firing frequency before the end of “big” windows to enable users get newest result in time.</li>
  <li>Data accuracy: waiting for late data in a specified time, and updating window results on arrival of late data.</li>
</ol>

<p><strong>The Maxmium Allowed Lateness</strong></p>

<p>It is necessary to specify how long the late data can be waited for by user configurations when <code class="highlighter-rouge">AFTER</code> strategy is used. Flink SQL provides a parameter <code class="highlighter-rouge">sql.exec.state.ttl.ms</code>, to indicate the maximum allowed lateness. For example, <code class="highlighter-rouge">blink.state.ttl.ms=3600000</code> means only data that arrives 1 hour late after the end of window will be discarded.</p>

<p>The following examples show how to specify SQL queries with group windows and the EMIT strategy on streaming tables.</p>

<div class="codetabs">
  <div data-lang="java">

    <figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">StreamExecutionEnvironment</span> <span class="n">env</span> <span class="o">=</span> <span class="n">StreamExecutionEnvironment</span><span class="o">.</span><span class="na">getExecutionEnvironment</span><span class="o">();</span>
<span class="n">StreamTableEnvironment</span> <span class="n">tableEnv</span> <span class="o">=</span> <span class="n">TableEnvironment</span><span class="o">.</span><span class="na">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">);</span>
<span class="c1">// wait 1 hour for late elements.</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">getConfig</span><span class="o">.</span><span class="na">withIdleStateRetentionTime</span><span class="o">(</span><span class="n">Time</span><span class="o">.</span><span class="na">milliseconds</span><span class="o">(</span><span class="mi">3600000L</span><span class="o">));</span>

<span class="c1">// ingest a DataStream from an external source</span>
<span class="n">DataStream</span><span class="o">&lt;</span><span class="n">Tuple3</span><span class="o">&lt;</span><span class="n">Long</span><span class="o">,</span> <span class="n">String</span><span class="o">,</span> <span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">ds</span> <span class="o">=</span> <span class="n">env</span><span class="o">.</span><span class="na">addSource</span><span class="o">(...);</span>
<span class="c1">// register the DataStream as table "Orders"</span>
<span class="n">tableEnv</span><span class="o">.</span><span class="na">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="s">"user, product, amount, proctime.proctime, rowtime.rowtime"</span><span class="o">);</span>

<span class="c1">// compute SUM(amount) per day (in event-time)</span>
<span class="n">Table</span> <span class="n">result1</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, "</span> <span class="o">+</span>
  <span class="s">"  TUMBLE_START(rowtime, INTERVAL '1' DAY) as wStart,  "</span> <span class="o">+</span>
  <span class="s">"  SUM(amount) FROM Orders "</span> <span class="o">+</span>
  <span class="s">"GROUP BY TUMBLE(rowtime, INTERVAL '1' DAY), user"</span><span class="o">);</span>

<span class="c1">// compute SUM(amount) per day (in processing-time)</span>
<span class="n">Table</span> <span class="n">result2</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, SUM(amount) FROM Orders GROUP BY TUMBLE(proctime, INTERVAL '1' DAY), user"</span><span class="o">);</span>

<span class="c1">// compute every hour the SUM(amount) of the last 24 hours in event-time</span>
<span class="n">Table</span> <span class="n">result3</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT product, SUM(amount) FROM Orders GROUP BY HOP(rowtime, INTERVAL '1' HOUR, INTERVAL '1' DAY), product"</span><span class="o">);</span>

<span class="c1">// compute SUM(amount) per session with 12 hour inactivity gap (in event-time)</span>
<span class="n">Table</span> <span class="n">result4</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, "</span> <span class="o">+</span>
  <span class="s">"  SESSION_START(rowtime, INTERVAL '12' HOUR) AS sStart, "</span> <span class="o">+</span>
  <span class="s">"  SESSION_ROWTIME(rowtime, INTERVAL '12' HOUR) AS snd, "</span> <span class="o">+</span>
  <span class="s">"  SUM(amount) "</span> <span class="o">+</span>
  <span class="s">"FROM Orders "</span> <span class="o">+</span>
  <span class="s">"GROUP BY SESSION(rowtime, INTERVAL '12' HOUR), user"</span><span class="o">);</span>

<span class="c1">// ==== the following examples show the usage of emit grammar to enable early-fire and late-fire of window. ====</span>

<span class="c1">// emit window result every 1 minute before end of window.</span>
<span class="n">Table</span> <span class="n">result5</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, "</span> <span class="o">+</span>
  <span class="s">"  TUMBLE_START(rowtime, INTERVAL '1' DAY) as wStart,  "</span> <span class="o">+</span>
  <span class="s">"  SUM(amount) FROM Orders "</span> <span class="o">+</span>
  <span class="s">"GROUP BY TUMBLE(rowtime, INTERVAL '1' DAY), user"</span> <span class="o">+</span>
  <span class="s">"WITH DELAY '1' MINUTE BEFORE WATERMARK"</span><span class="o">);</span>

<span class="c1">// emit window result without latency when elements arrive after end of window.</span>
<span class="n">Table</span> <span class="n">result6</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, "</span> <span class="o">+</span>
  <span class="s">"  TUMBLE_START(rowtime, INTERVAL '1' DAY) as wStart,  "</span> <span class="o">+</span>
  <span class="s">"  SUM(amount) FROM Orders "</span> <span class="o">+</span>
  <span class="s">"GROUP BY TUMBLE(rowtime, INTERVAL '1' DAY), user"</span> <span class="o">+</span>
  <span class="s">"EMIT WITHOUT DELAY AFTER WATERMARK"</span><span class="o">);</span>

<span class="c1">// emit window result every 1 minute globally.</span>
<span class="n">Table</span> <span class="n">result7</span> <span class="o">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="na">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, "</span> <span class="o">+</span>
  <span class="s">"  TUMBLE_START(rowtime, INTERVAL '1' DAY) as wStart,  "</span> <span class="o">+</span>
  <span class="s">"  SUM(amount) FROM Orders "</span> <span class="o">+</span>
  <span class="s">"GROUP BY TUMBLE(rowtime, INTERVAL '1' DAY), user"</span> <span class="o">+</span>
  <span class="s">"EMIT WITH DELAY '1' MINUTE"</span><span class="o">);</span></code></pre></figure>

  </div>

  <div data-lang="scala">

    <figure class="highlight"><pre><code class="language-scala" data-lang="scala"><span class="k">val</span> <span class="n">env</span> <span class="k">=</span> <span class="nc">StreamExecutionEnvironment</span><span class="o">.</span><span class="n">getExecutionEnvironment</span>
<span class="k">val</span> <span class="n">tableEnv</span> <span class="k">=</span> <span class="nc">TableEnvironment</span><span class="o">.</span><span class="n">getTableEnvironment</span><span class="o">(</span><span class="n">env</span><span class="o">)</span>

<span class="c1">// read a DataStream from an external source
</span><span class="k">val</span> <span class="n">ds</span><span class="k">:</span> <span class="kt">DataStream</span><span class="o">[(</span><span class="kt">Long</span>, <span class="kt">String</span>, <span class="kt">Int</span><span class="o">)]</span> <span class="k">=</span> <span class="n">env</span><span class="o">.</span><span class="n">addSource</span><span class="o">(...)</span>
<span class="c1">// register the DataStream under the name "Orders"
</span><span class="n">tableEnv</span><span class="o">.</span><span class="n">registerDataStream</span><span class="o">(</span><span class="s">"Orders"</span><span class="o">,</span> <span class="n">ds</span><span class="o">,</span> <span class="ss">'user,</span> <span class="ss">'product,</span> <span class="ss">'amount,</span> <span class="ss">'proctime.</span><span class="n">proctime</span><span class="o">,</span> <span class="ss">'rowtime.</span><span class="n">rowtime</span><span class="o">)</span>

<span class="c1">// compute SUM(amount) per day (in event-time)
</span><span class="k">val</span> <span class="n">result1</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT
      |  user,
      |  TUMBLE_START(rowtime, INTERVAL '1' DAY) as wStart,
      |  SUM(amount)
      | FROM Orders
      | GROUP BY TUMBLE(rowtime, INTERVAL '1' DAY), user
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>

<span class="c1">// compute SUM(amount) per day (in processing-time)
</span><span class="k">val</span> <span class="n">result2</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT user, SUM(amount) FROM Orders GROUP BY TUMBLE(proctime, INTERVAL '1' DAY), user"</span><span class="o">)</span>

<span class="c1">// compute every hour the SUM(amount) of the last 24 hours in event-time
</span><span class="k">val</span> <span class="n">result3</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
  <span class="s">"SELECT product, SUM(amount) FROM Orders GROUP BY HOP(rowtime, INTERVAL '1' HOUR, INTERVAL '1' DAY), product"</span><span class="o">)</span>

<span class="c1">// compute SUM(amount) per session with 12 hour inactivity gap (in event-time)
</span><span class="k">val</span> <span class="n">result4</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT
      |  user,
      |  SESSION_START(rowtime, INTERVAL '12' HOUR) AS sStart,
      |  SESSION_END(rowtime, INTERVAL '12' HOUR) AS sEnd,
      |  SUM(amount)
      | FROM Orders
      | GROUP BY SESSION(rowtime(), INTERVAL '12' HOUR), user
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>

<span class="c1">// ==== the following examples show the usage of emit grammar to enable early-fire and late-fire of window. ====
</span>
<span class="c1">// emit window result every 1 minute before end of window.
</span><span class="k">val</span> <span class="n">result5</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT
      |  user,
      |  SESSION_START(rowtime, INTERVAL '12' HOUR) AS sStart,
      |  SESSION_END(rowtime, INTERVAL '12' HOUR) AS sEnd,
      |  SUM(amount)
      | FROM Orders
      | GROUP BY SESSION(rowtime(), INTERVAL '12' HOUR), user
      | WITH DELAY '1' MINUTE BEFORE WATERMARK
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>

<span class="c1">// emit window result without latency when elements arrive after end of window.
</span><span class="k">val</span> <span class="n">result6</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT
      |  user,
      |  SESSION_START(rowtime, INTERVAL '12' HOUR) AS sStart,
      |  SESSION_END(rowtime, INTERVAL '12' HOUR) AS sEnd,
      |  SUM(amount)
      | FROM Orders
      | GROUP BY SESSION(rowtime(), INTERVAL '12' HOUR), user
      | EMIT WITHOUT DELAY AFTER WATERMARK
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span>

<span class="c1">// emit window result every 1 minute globally.
</span><span class="k">val</span> <span class="n">result7</span> <span class="k">=</span> <span class="n">tableEnv</span><span class="o">.</span><span class="n">sqlQuery</span><span class="o">(</span>
    <span class="s">"""
      |SELECT
      |  user,
      |  SESSION_START(rowtime, INTERVAL '12' HOUR) AS sStart,
      |  SESSION_END(rowtime, INTERVAL '12' HOUR) AS sEnd,
      |  SUM(amount)
      | FROM Orders
      | GROUP BY SESSION(rowtime(), INTERVAL '12' HOUR), user
      | EMIT WITH DELAY '1' MINUTE
    """</span><span class="o">.</span><span class="n">stripMargin</span><span class="o">)</span></code></pre></figure>

  </div>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h3 id="pattern-recognition">Pattern Recognition</h3>

<div>
  <table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 20%">Operation</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <strong>MATCH_RECOGNIZE</strong><br />
        <span class="label label-primary">Streaming</span>
      </td>
      <td>
        <p>Searches for a given pattern in a streaming table according to the <code>MATCH_RECOGNIZE</code> <a href="https://standards.iso.org/ittf/PubliclyAvailableStandards/c065143_ISO_IEC_TR_19075-5_2016.zip">ISO standard</a>. This makes it possible to express complex event processing (CEP) logic in SQL queries.</p>
        <p>For a more detailed description, see the dedicated page for <a href="streaming/match_recognize.html">detecting patterns in tables</a>.</p>


<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="k">SELECT</span> <span class="n">T</span><span class="p">.</span><span class="n">aid</span><span class="p">,</span> <span class="n">T</span><span class="p">.</span><span class="n">bid</span><span class="p">,</span> <span class="n">T</span><span class="p">.</span><span class="n">cid</span>
<span class="k">FROM</span> <span class="n">MyTable</span>
<span class="n">MATCH_RECOGNIZE</span> <span class="p">(</span>
  <span class="n">PARTITION</span> <span class="k">BY</span> <span class="n">userid</span>
  <span class="k">ORDER</span> <span class="k">BY</span> <span class="n">proctime</span>
  <span class="n">MEASURES</span>
    <span class="n">A</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">aid</span><span class="p">,</span>
    <span class="n">B</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">bid</span><span class="p">,</span>
    <span class="k">C</span><span class="p">.</span><span class="n">id</span> <span class="k">AS</span> <span class="n">cid</span>
  <span class="n">PATTERN</span> <span class="p">(</span><span class="n">A</span> <span class="n">B</span> <span class="k">C</span><span class="p">)</span>
  <span class="n">DEFINE</span>
    <span class="n">A</span> <span class="k">AS</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'a'</span><span class="p">,</span>
    <span class="n">B</span> <span class="k">AS</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'b'</span><span class="p">,</span>
    <span class="k">C</span> <span class="k">AS</span> <span class="n">name</span> <span class="o">=</span> <span class="s1">'c'</span>
<span class="p">)</span> <span class="k">AS</span> <span class="n">T</span></code></pre></figure>

      </td>
    </tr>

  </tbody>
</table>
</div>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="data-types">Data Types</h2>

<p>The SQL runtime is built on top of Flink’s DataStream APIs. Internally, it uses table’s <code class="highlighter-rouge">InternalType</code> to define data types. Fully supported types are listed in <code class="highlighter-rouge">org.apache.flink.table.api.Types</code>. The following table summarizes the relation between SQL Types, Table API types, and the resulting Java class.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Table API</th>
      <th style="text-align: left">SQL</th>
      <th style="text-align: left">Java type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.STRING</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">VARCHAR</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.String</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.BOOLEAN</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">BOOLEAN</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Boolean</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.BYTE</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">TINYINT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Byte</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.SHORT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">SMALLINT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Short</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.INT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">INTEGER, INT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Integer</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.LONG</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">BIGINT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Long</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.FLOAT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">REAL, FLOAT</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Float</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.DOUBLE</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">DOUBLE</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Double</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.DECIMAL</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">DECIMAL</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.math.BigDecimal</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.SQL_DATE</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">DATE</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.sql.Date</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.SQL_TIME</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">TIME</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.sql.Time</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.SQL_TIMESTAMP</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">TIMESTAMP(3)</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.sql.Timestamp</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.INTERVAL_MONTHS</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">INTERVAL YEAR TO MONTH</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Integer</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.INTERVAL_MILLIS</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">INTERVAL DAY TO SECOND(3)</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.lang.Long</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.PRIMITIVE_ARRAY</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">ARRAY</code></td>
      <td style="text-align: left">e.g. <code class="highlighter-rouge">int[]</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.OBJECT_ARRAY</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">ARRAY</code></td>
      <td style="text-align: left">e.g. <code class="highlighter-rouge">java.lang.Byte[]</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.MAP</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">MAP</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">java.util.HashMap</code></td>
    </tr>
    <tr>
      <td style="text-align: left"><code class="highlighter-rouge">DataTypes.MULTISET</code></td>
      <td style="text-align: left"><code class="highlighter-rouge">MULTISET</code></td>
      <td style="text-align: left">e.g. <code class="highlighter-rouge">java.util.HashMap&lt;String, Integer&gt;</code> for a multiset of <code class="highlighter-rouge">String</code></td>
    </tr>
  </tbody>
</table>

<p>Generic types and composite types (e.g., POJOs or Tuples) can be fields of a row as well. Generic types are treated as a black box and can be passed on or processed by <a href="udfs.html">user-defined functions</a>. Composite types can be accessed with <a href="#built-in-functions">built-in functions</a> (see <em>Value access functions</em> section).</p>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="built-in-functions">Built-In Functions</h2>

<p>Flink’s SQL support comes with a set of built-in functions for data transformations. This section gives a brief overview of the available functions.</p>

<!--
This list of SQL functions should be kept in sync with SqlExpressionTest to reduce confusion due to the large amount of SQL functions.
The documentation is split up and ordered like the tests in SqlExpressionTest.
-->

<p>The Flink SQL functions (including their syntax) are a subset of Apache Calcite’s built-in functions. Most of the documentation has been adopted from the <a href="https://calcite.apache.org/docs/reference.html">Calcite SQL reference</a>.</p>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Comparison functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 = value2</code></pre></figure>

      </td>
      <td>
        <p>Equals.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 &lt;&gt; value2</code></pre></figure>

      </td>
      <td>
        <p>Not equal.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 &gt; value2</code></pre></figure>

      </td>
      <td>
        <p>Greater than.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 &gt;= value2</code></pre></figure>

      </td>
      <td>
        <p>Greater than or equal.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 &lt; value2</code></pre></figure>

      </td>
      <td>
        <p>Less than.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 &lt;= value2</code></pre></figure>

      </td>
      <td>
        <p>Less than or equal.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value IS NULL</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value</i> is null.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value IS NOT NULL</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value</i> is not null.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 IS DISTINCT FROM value2</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if two values are not equal, treating null values as the same.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 IS NOT DISTINCT FROM value2</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if two values are equal, treating null values as the same.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 BETWEEN [ASYMMETRIC | SYMMETRIC] value2 AND value3</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value1</i> is greater than or equal to <i>value2</i> and less than or equal to <i>value3</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value1 NOT BETWEEN value2 AND value3</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value1</i> is less than <i>value2</i> or greater than <i>value3</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">string1 LIKE string2 [ ESCAPE string3 ]</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>string1</i> matches pattern <i>string2</i>. An escape character can be defined if necessary.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">string1 NOT LIKE string2 [ ESCAPE string3 ]</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>string1</i> does not match pattern <i>string2</i>. An escape character can be defined if necessary.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">string1 SIMILAR TO string2 [ ESCAPE string3 ]</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>string1</i> matches regular expression <i>string2</i>. An escape character can be defined if necessary.</p>
      </td>
    </tr>


    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">string1 NOT SIMILAR TO string2 [ ESCAPE string3 ]</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>string1</i> does not match regular expression <i>string2</i>. An escape character can be defined if necessary.</p>
      </td>
    </tr>


    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value IN (value [, value]* )</code></pre></figure>

      </td>
      <td>
        <p> Returns TRUE if an expression exists in a given list of expressions. This is a shorthand for multiple OR conditions. If the testing set contains NULL, the result will be NULL if the element can not be found and TRUE if it can be found. If the element is NULL, the result is always NULL. E.g. "42 IN (1, 2, 3)" leads to FALSE.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value NOT IN (value [, value]* )</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value</i> is not equal to every value in a list.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">EXISTS (sub-query)</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>sub-query</i> returns at least one row. Only supported if the operation can be rewritten in a join and group operation.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value IN (sub-query)</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value</i> is equal to a row returned by sub-query. This operation is not supported in a streaming environment yet.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">value NOT IN (sub-query)</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>value</i> is not equal to every row returned by sub-query. This operation is not supported in a streaming environment yet.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Logical functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean1 OR boolean2</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean1</i> is TRUE or <i>boolean2</i> is TRUE. Supports three-valued logic.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean1 AND boolean2</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean1</i> and <i>boolean2</i> are both TRUE. Supports three-valued logic.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">NOT boolean</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is not TRUE; returns UNKNOWN if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS FALSE</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is FALSE; returns FALSE if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS NOT FALSE</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is not FALSE; returns TRUE if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS TRUE</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is TRUE; returns FALSE if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS NOT TRUE</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is not TRUE; returns TRUE if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS UNKNOWN</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is UNKNOWN.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">boolean IS NOT UNKNOWN</code></pre></figure>

      </td>
      <td>
        <p>Returns TRUE if <i>boolean</i> is not UNKNOWN.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Arithmetic functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">+ numeric</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">- numeric</code></pre></figure>

      </td>
      <td>
        <p>Returns negative <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">numeric1 + numeric2</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric1</i> plus <i>numeric2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">numeric1 - numeric2</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric1</i> minus <i>numeric2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">numeric1 * numeric2</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric1</i> multiplied by <i>numeric2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">numeric1 / numeric2</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric1</i> divided by <i>numeric2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">POWER(numeric1, numeric2)</code></pre></figure>

      </td>
      <td>
        <p>Returns <i>numeric1</i> raised to the power of <i>numeric2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ABS(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the absolute value of <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">MOD(numeric1, numeric2)</code></pre></figure>

      </td>
      <td>
        <p>Returns the remainder (modulus) of <i>numeric1</i> divided by <i>numeric2</i>. The result is negative only if <i>numeric1</i> is negative.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SQRT(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the square root of <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the natural logarithm (base e) of <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOG10(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the base 10 logarithm of <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOG2(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the base 2 logarithm of <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">EXP(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns e raised to the power of <i>numeric</i>.</p>
      </td>
    </tr>   

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CEIL(numeric)
CEILING(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Rounds <i>numeric</i> up, and returns the smallest number that is greater than or equal to <i>numeric</i>.</p>
      </td>
    </tr>  

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">FLOOR(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Rounds <i>numeric</i> down, and returns the largest number that is less than or equal to <i>numeric</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SIN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the sine of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">COS(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the cosine of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TAN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the tangent of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">COT(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the cotangent of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ASIN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the arc sine of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ACOS(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the arc cosine of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SINH(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the hyperbolic sine of a given number.</p> 
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ATAN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the arc tangent of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TANH(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the hyperbolic tangent of a given number.</p> 
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">DEGREES(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Converts <i>numeric</i> from radians to degrees.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">RADIANS(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Converts <i>numeric</i> from degrees to radians.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SIGN(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Calculates the signum of a given number.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ROUND(numeric, int)</code></pre></figure>

      </td>
      <td>
        <p>Rounds the given number to <i>integer</i> places right to the decimal point.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">PI()</code></pre></figure>

      </td>
      <td>
        <p>Returns a value that is closer than any other value to pi.</p>
      </td>
    </tr>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">E()</code></pre></figure>

      </td>
      <td>
        <p>Returns a value that is closer than any other value to e.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">RAND()</code></pre></figure>

      </td>
      <td>
        <p>Returns a pseudorandom double value between 0.0 (inclusive) and 1.0 (exclusive).</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">RAND(seed integer)</code></pre></figure>

      </td>
      <td>
        <p>Returns a pseudorandom double value between 0.0 (inclusive) and 1.0 (exclusive) with a initial seed. Two RAND functions will return identical sequences of numbers if they have same initial seed.</p>
      </td>
    </tr>

    <tr>
     <td>
       
<figure class="highlight"><pre><code class="language-text" data-lang="text">RAND_INTEGER(bound integer)</code></pre></figure>

     </td>
    <td>
      <p>Returns a pseudorandom integer value between 0.0 (inclusive) and the specified value (exclusive).</p>
    </td>
   </tr>

    <tr>
     <td>
       
<figure class="highlight"><pre><code class="language-text" data-lang="text">RAND_INTEGER(seed integer, bound integer)</code></pre></figure>

     </td>
    <td>
      <p>Returns a pseudorandom integer value between 0.0 (inclusive) and the specified value (exclusive) with a initial seed. Two RAND_INTEGER functions will return identical sequences of numbers if they have same initial seed and same bound.</p>
    </td>
   </tr>

    <tr>
     <td>
       
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOG(x numeric), LOG(base numeric, x numeric)</code></pre></figure>

     </td>
    <td>
      <p>Returns the natural logarithm of a specified number of a specified base. If called with one parameter, this function returns the natural logarithm of <code>x</code>. If called with two parameters, this function returns the logarithm of <code>x</code> to the base <code>b</code>. <code>x</code> must be greater than 0. <code>b</code> must be greater than 1.</p>
    </td>
   </tr>
   
    <tr>
      <td>

<figure class="highlight"><pre><code class="language-text" data-lang="text">BIN(numeric)
      </code></pre></figure>

      </td>
      <td>
        <p>Returns a string representation of an integer numeric value in binary format. Returns null if numeric is null. E.g. "4" leads to "100", "12" leads to "1100".</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">String functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">string || string</code></pre></figure>

      </td>
      <td>
        <p>Concatenates two character strings.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CHAR_LENGTH(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the number of characters in a character string.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CHARACTER_LENGTH(string)</code></pre></figure>

      </td>
      <td>
        <p>As CHAR_LENGTH(<i>string</i>).</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">UPPER(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns a character string converted to upper case.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOWER(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns a character string converted to lower case.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">POSITION(string1 IN string2)</code></pre></figure>

      </td>
      <td>
        <p>Returns the position of the first occurrence of <i>string1</i> in <i>string2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TRIM( { BOTH | LEADING | TRAILING } string1 FROM string2)</code></pre></figure>

      </td>
      <td>
        <p>Removes leading and/or trailing characters from <i>string2</i>. By default, whitespaces at both sides are removed.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">OVERLAY(string1 PLACING string2 FROM integer [ FOR integer2 ])</code></pre></figure>

      </td>
      <td>
        <p>Replaces a substring of <i>string1</i> with <i>string2</i>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SUBSTRING(string FROM integer)</code></pre></figure>

      </td>
      <td>
        <p>Returns a substring of a character string starting at a given point.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SUBSTRING(string FROM integer FOR integer)</code></pre></figure>

      </td>
      <td>
        <p>Returns a substring of a character string starting at a given point with a given length.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">INITCAP(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns string with the first letter of each word converter to upper case and the rest to lower case. Words are sequences of alphanumeric characters separated by non-alphanumeric characters.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CONCAT(string1, string2,...)</code></pre></figure>

      </td>
      <td>
        <p>Returns the string that results from concatenating the arguments. Returns NULL if any argument is NULL. E.g. <code>CONCAT("AA", "BB", "CC")</code> returns <code>AABBCC</code>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CONCAT_WS(separator, string1, string2,...)</code></pre></figure>

      </td>
      <td>
        <p>Returns the string that results from concatenating the arguments using a separator. The separator is added between the strings to be concatenated. Returns NULL If the separator is NULL. CONCAT_WS() does not skip empty strings. However, it does skip any NULL argument. E.g. <code>CONCAT_WS("~", "AA", "BB", "", "CC")</code> returns <code>AA~BB~~CC</code></p>
  </td>
    </tr>

        <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LPAD(text string, len integer, pad string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the string text left-padded with the string pad to a length of len characters. If text is longer than len, the return value is shortened to len characters. E.g. <code>LPAD('hi',4,'??')</code> returns <code>??hi</code>, <code>LPAD('hi',1,'??')</code> returns <code>h</code>.</p>
      </td>
    </tr>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">RPAD(text string, len integer, pad string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the string text right-padded with the string pad to a length of len characters. If text is longer than len, the return value is shortened to len characters. E.g. <code>RPAD('hi',4,'??')</code> returns <code>hi??</code>, <code>RPAD('hi',1,'??')</code> returns <code>h</code>.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Conditional functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CASE value
WHEN value1 [, value11 ]* THEN result1
[ WHEN valueN [, valueN1 ]* THEN resultN ]*
[ ELSE resultZ ]
END</code></pre></figure>

      </td>
      <td>
        <p>Simple case.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CASE
WHEN condition1 THEN result1
[ WHEN conditionN THEN resultN ]*
[ ELSE resultZ ]
END</code></pre></figure>

      </td>
      <td>
        <p>Searched case.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">NULLIF(value, value)</code></pre></figure>

      </td>
      <td>
        <p>Returns NULL if the values are the same. For example, <code>NULLIF(5, 5)</code> returns NULL; <code>NULLIF(5, 0)</code> returns 5.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">COALESCE(value, value [, value ]* )</code></pre></figure>

      </td>
      <td>
        <p>Provides a value if the first value is null. For example, <code>COALESCE(NULL, 5)</code> returns 5.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Type conversion functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CAST(value AS type)</code></pre></figure>

      </td>
      <td>
        <p>Converts a value to a given type.</p>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Temporal functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">DATE string</code></pre></figure>

      </td>
      <td>
        <p>Parses a date string in the form "yy-mm-dd" to a SQL date.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TIME string</code></pre></figure>

      </td>
      <td>
        <p>Parses a time <i>string</i> in the form "hh:mm:ss" to a SQL time.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TIMESTAMP string</code></pre></figure>

      </td>
      <td>
        <p>Parses a timestamp <i>string</i> in the form "yy-mm-dd hh:mm:ss.fff" to a SQL timestamp.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">INTERVAL string range</code></pre></figure>

      </td>
      <td>
        <p>Parses an interval <i>string</i> in the form "dd hh:mm:ss.fff" for SQL intervals of milliseconds or "yyyy-mm" for SQL intervals of months. An interval range might be e.g. <code>DAY</code>, <code>MINUTE</code>, <code>DAY TO HOUR</code>, or <code>DAY TO SECOND</code> for intervals of milliseconds; <code>YEAR</code> or <code>YEAR TO MONTH</code> for intervals of months. E.g. <code>INTERVAL '10 00:00:00.004' DAY TO SECOND</code>, <code>INTERVAL '10' DAY</code>, or <code>INTERVAL '2-10' YEAR TO MONTH</code> return intervals.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CURRENT_DATE</code></pre></figure>

      </td>
      <td>
        <p>Returns the current SQL date in UTC time zone.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CURRENT_TIME</code></pre></figure>

      </td>
      <td>
        <p>Returns the current SQL time in UTC time zone.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CURRENT_TIMESTAMP</code></pre></figure>

      </td>
      <td>
        <p>Returns the current SQL timestamp in UTC time zone.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOCALTIME</code></pre></figure>

      </td>
      <td>
        <p>Returns the current SQL time in local time zone.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">LOCALTIMESTAMP</code></pre></figure>

      </td>
      <td>
        <p>Returns the current SQL timestamp in local time zone.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">EXTRACT(timeintervalunit FROM temporal)</code></pre></figure>

      </td>
      <td>
        <p>Extracts parts of a time point or time interval. Returns the part as a long value. E.g. <code>EXTRACT(DAY FROM DATE '2006-06-05')</code> leads to 5.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">FLOOR(timepoint TO timeintervalunit)</code></pre></figure>

      </td>
      <td>
        <p>Rounds a time point down to the given unit. E.g. <code>FLOOR(TIME '12:44:31' TO MINUTE)</code> leads to 12:44:00.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CEIL(timepoint TO timeintervalunit)</code></pre></figure>

      </td>
      <td>
        <p>Rounds a time point up to the given unit. E.g. <code>CEIL(TIME '12:44:31' TO MINUTE)</code> leads to 12:45:00.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">QUARTER(date)</code></pre></figure>

      </td>
      <td>
        <p>Returns the quarter of a year from a SQL date. E.g. <code>QUARTER(DATE '1994-09-27')</code> leads to 3.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">(timepoint, temporal) OVERLAPS (timepoint, temporal)</code></pre></figure>

      </td>
      <td>
        <p>Determines whether two anchored time intervals overlap. Time point and temporal are transformed into a range defined by two time points (start, end). The function evaluates <code>leftEnd &gt;= rightStart &amp;&amp; rightEnd &gt;= leftStart</code>. E.g. <code>(TIME '2:55:00', INTERVAL '1' HOUR) OVERLAPS (TIME '3:30:00', INTERVAL '2' HOUR)</code> leads to true; <code>(TIME '9:00:00', TIME '10:00:00') OVERLAPS (TIME '10:15:00', INTERVAL '3' HOUR)</code> leads to false.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">DATE_FORMAT(timestamp, format)</code></pre></figure>

      </td>
      <td>
        <p>Formats <code>timestamp</code> as a string using a specified <code>format</code> string. The format must be compatible with MySQL's date formatting syntax as used by the <code>date_parse</code> function. The format specification is given in the <a href="#date-format-specifier">Date Format Specifier table</a> below.</p>
        <p>For example <code>DATE_FORMAT(ts, '%Y, %d %M')</code> results in strings formatted as <code>"2017, 05 May"</code>.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">TIMESTAMPADD(unit, interval, timestamp)</code></pre></figure>

      </td>
      <td>
        <p>Adds a (signed) integer interval to a timestamp. The unit for the interval is given by the unit argument, which should be one of the following values: <code>SECOND</code>, <code>MINUTE</code>, <code>HOUR</code>, <code>DAY</code>, <code>WEEK</code>, <code>MONTH</code>, <code>QUARTER</code>, or <code>YEAR</code>. E.g. <code>TIMESTAMPADD(WEEK, 1, '2003-01-02')</code> leads to <code>2003-01-09</code>.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Aggregate functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">COUNT(value [, value]* )</code></pre></figure>

      </td>
      <td>
        <p>Returns the number of input rows for which <i>value</i> is not null. Use <code>COUNT(DISTINCT value)</code> for the number of unique values in the column or expression.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">COUNT(*)</code></pre></figure>

      </td>
      <td>
        <p>Returns the number of input rows.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">AVG(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the average (arithmetic mean) of <i>numeric</i> across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SUM(numeric)</code></pre></figure>

      </td>
      <td>
        <p>Returns the sum of <i>numeric</i> across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">MAX(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the maximum value of <i>value</i> across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">MIN(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the minimum value of <i>value</i> across all input values.</p>
      </td>
    </tr>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">STDDEV_POP(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the population standard deviation of the numeric field across all input values.</p>
      </td>
    </tr>

<tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">STDDEV_SAMP(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the sample standard deviation of the numeric field across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">VAR_POP(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the population variance (square of the population standard deviation) of the numeric field across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">VAR_SAMP(value)</code></pre></figure>

      </td>
      <td>
        <p>Returns the sample variance (square of the sample standard deviation) of the numeric field across all input values.</p>
      </td>
    </tr>

    <tr>
      <td>
          
<figure class="highlight"><pre><code class="language-text" data-lang="text">          COLLECT(value)
          </code></pre></figure>

      </td>
      <td>
          <p>Returns a multiset of the <i>value</i>s. null input <i>value</i> will be ignored. Return an empty multiset if only null values are added. </p>
      </td>
    </tr>
    
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">concat_agg</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="n">sep</span><span class="o">)</span>
        </code></pre></figure>

      </td>
      <td>
        <p>Concat all the column values to one string, will ignore null values, a separator can be specified.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">first_value</span><span class="o">()</span>
        </code></pre></figure>

      </td>
      <td>
        <p>Fetch the first not null value of a group and return, if all the values are null, then return null.</p>
      </td>
    </tr>
    
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-java" data-lang="java"><span class="n">last_value</span><span class="o">()</span>
        </code></pre></figure>

      </td>
      <td>
        <p>Fetch the last not null value of a group and return, if all the values are null, then return null.</p>
      </td>
    </tr>    
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Grouping functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">GROUP_ID()</code></pre></figure>

      </td>
      <td>
        <p>Returns an integer that uniquely identifies the combination of grouping keys.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">GROUPING(expression)</code></pre></figure>

      </td>
      <td>
        <p>Returns 1 if <i>expression</i> is rolled up in the current row’s grouping set, 0 otherwise.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">GROUPING_ID(expression [, expression]* )</code></pre></figure>

      </td>
      <td>
        <p>Returns a bit vector of the given grouping expressions.</p>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Value access functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">tableName.compositeType.field</code></pre></figure>

      </td>
      <td>
        <p>Accesses the field of a Flink composite type (such as Tuple, POJO, etc.) by name and returns it's value.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">tableName.compositeType.*</code></pre></figure>

      </td>
      <td>
        <p>Converts a Flink composite type (such as Tuple, POJO, etc.) and all of its direct subtypes into a flat representation where every subtype is a separate field.</p>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Value constructor functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">(value, [, value]*)</code></pre></figure>

      </td>
      <td>
        <p>Creates a row from a list of values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ROW(value, [, value]*)</code></pre></figure>

      </td>
      <td>
        <p>Creates a row from a list of values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ARRAY ‘[’ value [, value ]* ‘]’</code></pre></figure>

      </td>
      <td>
        <p>Creates an array from a list of values.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">MAP ‘[’ key, value [, key, value ]* ‘]’</code></pre></figure>

      </td>
      <td>
        <p>Creates a map from a list of key-value pairs.</p>
      </td>
    </tr>

  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Array functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CARDINALITY(ARRAY)</code></pre></figure>

      </td>
      <td>
        <p>Returns the number of elements of an array.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">array ‘[’ index ‘]’</code></pre></figure>

      </td>
      <td>
        <p>Returns the element at a particular position in an array. The index starts at 1.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">ELEMENT(ARRAY)</code></pre></figure>

      </td>
      <td>
        <p>Returns the sole element of an array with a single element. Returns <code>null</code> if the array is empty. Throws an exception if the array has more than one element.</p>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Map functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">CARDINALITY(MAP)</code></pre></figure>

      </td>
      <td>
        <p>Returns the number of entries of a map.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">map ‘[’ key ‘]’</code></pre></figure>

      </td>
      <td>
        <p>Returns the value specified by a particular key in a map.</p>
      </td>
    </tr>
  </tbody>
</table>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Hash functions</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>

  <tbody>
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">MD5(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the MD5 hash of the string argument as a string of 32 hexadecimal digits; null if <i>string</i> is null.</p>
      </td>
    </tr>

    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SHA1(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the SHA-1 hash of the string argument as a string of 40 hexadecimal digits; null if <i>string</i> is null.</p>
      </td>
    </tr>
    
    <tr>
      <td>
        
<figure class="highlight"><pre><code class="language-text" data-lang="text">SHA256(string)</code></pre></figure>

      </td>
      <td>
        <p>Returns the SHA-256 hash of the string argument as a string of 64 hexadecimal digits; null if <i>string</i> is null.</p>
      </td>
    </tr>
  </tbody>
</table>

<h3 id="unsupported-functions">Unsupported Functions</h3>

<p>The following functions are not supported yet:</p>

<ul>
  <li>Binary string operators and functions</li>
  <li>System functions</li>
</ul>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>

<h2 id="reserved-keywords">Reserved Keywords</h2>

<p>Although not every SQL feature is implemented yet, some string combinations are already reserved as keywords for future use. If you want to use one of the following strings as a field name, make sure to surround them with backticks (e.g. <code class="highlighter-rouge">`value`</code>, <code class="highlighter-rouge">`count`</code>).</p>

<figure class="highlight"><pre><code class="language-sql" data-lang="sql"><span class="n">A</span><span class="p">,</span> <span class="k">ABS</span><span class="p">,</span> <span class="k">ABSOLUTE</span><span class="p">,</span> <span class="n">ACTION</span><span class="p">,</span> <span class="k">ADA</span><span class="p">,</span> <span class="k">ADD</span><span class="p">,</span> <span class="k">ADMIN</span><span class="p">,</span> <span class="k">AFTER</span><span class="p">,</span> <span class="k">ALL</span><span class="p">,</span> <span class="k">ALLOCATE</span><span class="p">,</span> <span class="n">ALLOW</span><span class="p">,</span> <span class="k">ALTER</span><span class="p">,</span> <span class="n">ALWAYS</span><span class="p">,</span> <span class="k">AND</span><span class="p">,</span> <span class="k">ANY</span><span class="p">,</span> <span class="k">ARE</span><span class="p">,</span> <span class="n">ARRAY</span><span class="p">,</span> <span class="k">AS</span><span class="p">,</span> <span class="k">ASC</span><span class="p">,</span> <span class="k">ASENSITIVE</span><span class="p">,</span> <span class="k">ASSERTION</span><span class="p">,</span> <span class="k">ASSIGNMENT</span><span class="p">,</span> <span class="k">ASYMMETRIC</span><span class="p">,</span> <span class="k">AT</span><span class="p">,</span> <span class="k">ATOMIC</span><span class="p">,</span> <span class="n">ATTRIBUTE</span><span class="p">,</span> <span class="n">ATTRIBUTES</span><span class="p">,</span> <span class="k">AUTHORIZATION</span><span class="p">,</span> <span class="k">AVG</span><span class="p">,</span> <span class="k">BEFORE</span><span class="p">,</span> <span class="k">BEGIN</span><span class="p">,</span> <span class="n">BERNOULLI</span><span class="p">,</span> <span class="k">BETWEEN</span><span class="p">,</span> <span class="n">BIGINT</span><span class="p">,</span> <span class="n">BINARY</span><span class="p">,</span> <span class="n">BIT</span><span class="p">,</span> <span class="n">BLOB</span><span class="p">,</span> <span class="n">BOOLEAN</span><span class="p">,</span> <span class="k">BOTH</span><span class="p">,</span> <span class="k">BREADTH</span><span class="p">,</span> <span class="k">BY</span><span class="p">,</span> <span class="k">C</span><span class="p">,</span> <span class="k">CALL</span><span class="p">,</span> <span class="k">CALLED</span><span class="p">,</span> <span class="k">CARDINALITY</span><span class="p">,</span> <span class="k">CASCADE</span><span class="p">,</span> <span class="k">CASCADED</span><span class="p">,</span> <span class="k">CASE</span><span class="p">,</span> <span class="k">CAST</span><span class="p">,</span> <span class="k">CATALOG</span><span class="p">,</span> <span class="k">CATALOG_NAME</span><span class="p">,</span> <span class="n">CEIL</span><span class="p">,</span> <span class="n">CEILING</span><span class="p">,</span> <span class="n">CENTURY</span><span class="p">,</span> <span class="k">CHAIN</span><span class="p">,</span> <span class="n">CHAR</span><span class="p">,</span> <span class="n">CHARACTER</span><span class="p">,</span> <span class="n">CHARACTERISTICTS</span><span class="p">,</span> <span class="n">CHARACTERS</span><span class="p">,</span> <span class="k">CHARACTER_LENGTH</span><span class="p">,</span> <span class="k">CHARACTER_SET_CATALOG</span><span class="p">,</span> <span class="k">CHARACTER_SET_NAME</span><span class="p">,</span> <span class="k">CHARACTER_SET_SCHEMA</span><span class="p">,</span> <span class="k">CHAR_LENGTH</span><span class="p">,</span> <span class="k">CHECK</span><span class="p">,</span> <span class="k">CLASS_ORIGIN</span><span class="p">,</span> <span class="k">CLOB</span><span class="p">,</span> <span class="k">CLOSE</span><span class="p">,</span> <span class="n">COALESCE</span><span class="p">,</span> <span class="k">COBOL</span><span class="p">,</span> <span class="k">COLLATE</span><span class="p">,</span> <span class="k">COLLATION</span><span class="p">,</span> <span class="k">COLLATION_CATALOG</span><span class="p">,</span> <span class="k">COLLATION_NAME</span><span class="p">,</span> <span class="k">COLLATION_SCHEMA</span><span class="p">,</span> <span class="n">COLLECT</span><span class="p">,</span> <span class="k">COLUMN</span><span class="p">,</span> <span class="k">COLUMN_NAME</span><span class="p">,</span> <span class="k">COMMAND_FUNCTION</span><span class="p">,</span> <span class="k">COMMAND_FUNCTION_CODE</span><span class="p">,</span> <span class="k">COMMIT</span><span class="p">,</span> <span class="k">COMMITTED</span><span class="p">,</span> <span class="n">CONDITION</span><span class="p">,</span> <span class="k">CONDITION_NUMBER</span><span class="p">,</span> <span class="k">CONNECT</span><span class="p">,</span> <span class="k">CONNECTION</span><span class="p">,</span> <span class="k">CONNECTION_NAME</span><span class="p">,</span> <span class="k">CONSTRAINT</span><span class="p">,</span> <span class="k">CONSTRAINTS</span><span class="p">,</span> <span class="k">CONSTRAINT_CATALOG</span><span class="p">,</span> <span class="k">CONSTRAINT_NAME</span><span class="p">,</span> <span class="k">CONSTRAINT_SCHEMA</span><span class="p">,</span> <span class="k">CONSTRUCTOR</span><span class="p">,</span> <span class="k">CONTAINS</span><span class="p">,</span> <span class="k">CONTINUE</span><span class="p">,</span> <span class="k">CONVERT</span><span class="p">,</span> <span class="n">CORR</span><span class="p">,</span> <span class="n">CORRESPONDING</span><span class="p">,</span> <span class="k">COUNT</span><span class="p">,</span> <span class="n">COVAR_POP</span><span class="p">,</span> <span class="n">COVAR_SAMP</span><span class="p">,</span> <span class="k">CREATE</span><span class="p">,</span> <span class="k">CROSS</span><span class="p">,</span> <span class="k">CUBE</span><span class="p">,</span> <span class="n">CUME_DIST</span><span class="p">,</span> <span class="k">CURRENT</span><span class="p">,</span> <span class="n">CURRENT_CATALOG</span><span class="p">,</span> <span class="k">CURRENT_DATE</span><span class="p">,</span> <span class="n">CURRENT_DEFAULT_TRANSFORM_GROUP</span><span class="p">,</span> <span class="k">CURRENT_PATH</span><span class="p">,</span> <span class="k">CURRENT_ROLE</span><span class="p">,</span> <span class="n">CURRENT_SCHEMA</span><span class="p">,</span> <span class="k">CURRENT_TIME</span><span class="p">,</span> <span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span> <span class="n">CURRENT_TRANSFORM_GROUP_FOR_TYPE</span><span class="p">,</span> <span class="k">CURRENT_USER</span><span class="p">,</span> <span class="k">CURSOR</span><span class="p">,</span> <span class="k">CURSOR_NAME</span><span class="p">,</span> <span class="k">CYCLE</span><span class="p">,</span> <span class="k">DATA</span><span class="p">,</span> <span class="k">DATABASE</span><span class="p">,</span> <span class="n">DATE</span><span class="p">,</span> <span class="k">DATETIME_INTERVAL_CODE</span><span class="p">,</span> <span class="k">DATETIME_INTERVAL_PRECISION</span><span class="p">,</span> <span class="k">DAY</span><span class="p">,</span> <span class="k">DEALLOCATE</span><span class="p">,</span> <span class="n">DEC</span><span class="p">,</span> <span class="n">DECADE</span><span class="p">,</span> <span class="n">DECIMAL</span><span class="p">,</span> <span class="k">DECLARE</span><span class="p">,</span> <span class="k">DEFAULT</span><span class="p">,</span> <span class="k">DEFAULTS</span><span class="p">,</span> <span class="k">DEFERRABLE</span><span class="p">,</span> <span class="k">DEFERRED</span><span class="p">,</span> <span class="k">DEFINED</span><span class="p">,</span> <span class="k">DEFINER</span><span class="p">,</span> <span class="n">DEGREE</span><span class="p">,</span> <span class="k">DELETE</span><span class="p">,</span> <span class="n">DENSE_RANK</span><span class="p">,</span> <span class="n">DEPTH</span><span class="p">,</span> <span class="k">DEREF</span><span class="p">,</span> <span class="n">DERIVED</span><span class="p">,</span> <span class="k">DESC</span><span class="p">,</span> <span class="k">DESCRIBE</span><span class="p">,</span> <span class="n">DESCRIPTION</span><span class="p">,</span> <span class="k">DESCRIPTOR</span><span class="p">,</span> <span class="k">DETERMINISTIC</span><span class="p">,</span> <span class="k">DIAGNOSTICS</span><span class="p">,</span> <span class="n">DISALLOW</span><span class="p">,</span> <span class="k">DISCONNECT</span><span class="p">,</span> <span class="k">DISPATCH</span><span class="p">,</span> <span class="k">DISTINCT</span><span class="p">,</span> <span class="k">DOMAIN</span><span class="p">,</span> <span class="n">DOUBLE</span><span class="p">,</span> <span class="n">DOW</span><span class="p">,</span> <span class="n">DOY</span><span class="p">,</span> <span class="k">DROP</span><span class="p">,</span> <span class="k">DYNAMIC</span><span class="p">,</span> <span class="k">DYNAMIC_FUNCTION</span><span class="p">,</span> <span class="k">DYNAMIC_FUNCTION_CODE</span><span class="p">,</span> <span class="k">EACH</span><span class="p">,</span> <span class="n">ELEMENT</span><span class="p">,</span> <span class="k">ELSE</span><span class="p">,</span> <span class="k">END</span><span class="p">,</span> <span class="k">END</span><span class="o">-</span><span class="k">EXEC</span><span class="p">,</span> <span class="n">EPOCH</span><span class="p">,</span> <span class="k">EQUALS</span><span class="p">,</span> <span class="k">ESCAPE</span><span class="p">,</span> <span class="k">EVERY</span><span class="p">,</span> <span class="k">EXCEPT</span><span class="p">,</span> <span class="n">EXCEPTION</span><span class="p">,</span> <span class="n">EXCLUDE</span><span class="p">,</span> <span class="k">EXCLUDING</span><span class="p">,</span> <span class="k">EXEC</span><span class="p">,</span> <span class="k">EXECUTE</span><span class="p">,</span> <span class="k">EXISTS</span><span class="p">,</span> <span class="n">EXP</span><span class="p">,</span> <span class="k">EXPLAIN</span><span class="p">,</span> <span class="n">EXTEND</span><span class="p">,</span> <span class="k">EXTERNAL</span><span class="p">,</span> <span class="k">EXTRACT</span><span class="p">,</span> <span class="k">FALSE</span><span class="p">,</span> <span class="k">FETCH</span><span class="p">,</span> <span class="n">FILTER</span><span class="p">,</span> <span class="k">FINAL</span><span class="p">,</span> <span class="k">FIRST</span><span class="p">,</span> <span class="n">FIRST_VALUE</span><span class="p">,</span> <span class="n">FLOAT</span><span class="p">,</span> <span class="n">FLOOR</span><span class="p">,</span> <span class="n">FOLLOWING</span><span class="p">,</span> <span class="k">FOR</span><span class="p">,</span> <span class="k">FOREIGN</span><span class="p">,</span> <span class="k">FORTRAN</span><span class="p">,</span> <span class="k">FOUND</span><span class="p">,</span> <span class="n">FRAC_SECOND</span><span class="p">,</span> <span class="k">FREE</span><span class="p">,</span> <span class="k">FROM</span><span class="p">,</span> <span class="k">FULL</span><span class="p">,</span> <span class="k">FUNCTION</span><span class="p">,</span> <span class="n">FUSION</span><span class="p">,</span> <span class="k">G</span><span class="p">,</span> <span class="k">GENERAL</span><span class="p">,</span> <span class="k">GENERATED</span><span class="p">,</span> <span class="k">GET</span><span class="p">,</span> <span class="k">GLOBAL</span><span class="p">,</span> <span class="k">GO</span><span class="p">,</span> <span class="k">GOTO</span><span class="p">,</span> <span class="k">GRANT</span><span class="p">,</span> <span class="k">GRANTED</span><span class="p">,</span> <span class="k">GROUP</span><span class="p">,</span> <span class="k">GROUPING</span><span class="p">,</span> <span class="k">HAVING</span><span class="p">,</span> <span class="k">HIERARCHY</span><span class="p">,</span> <span class="k">HOLD</span><span class="p">,</span> <span class="n">HOUR</span><span class="p">,</span> <span class="k">IDENTITY</span><span class="p">,</span> <span class="k">IMMEDIATE</span><span class="p">,</span> <span class="k">IMPLEMENTATION</span><span class="p">,</span> <span class="n">IMPORT</span><span class="p">,</span> <span class="k">IN</span><span class="p">,</span> <span class="k">INCLUDING</span><span class="p">,</span> <span class="k">INCREMENT</span><span class="p">,</span> <span class="n">INDICATOR</span><span class="p">,</span> <span class="k">INITIALLY</span><span class="p">,</span> <span class="k">INNER</span><span class="p">,</span> <span class="k">INOUT</span><span class="p">,</span> <span class="k">INPUT</span><span class="p">,</span> <span class="k">INSENSITIVE</span><span class="p">,</span> <span class="k">INSERT</span><span class="p">,</span> <span class="n">INSTANCE</span><span class="p">,</span> <span class="k">INSTANTIABLE</span><span class="p">,</span> <span class="n">INT</span><span class="p">,</span> <span class="n">INTEGER</span><span class="p">,</span> <span class="k">INTERSECT</span><span class="p">,</span> <span class="n">INTERSECTION</span><span class="p">,</span> <span class="n">INTERVAL</span><span class="p">,</span> <span class="k">INTO</span><span class="p">,</span> <span class="k">INVOKER</span><span class="p">,</span> <span class="k">IS</span><span class="p">,</span> <span class="k">ISOLATION</span><span class="p">,</span> <span class="n">JAVA</span><span class="p">,</span> <span class="k">JOIN</span><span class="p">,</span> <span class="n">K</span><span class="p">,</span> <span class="k">KEY</span><span class="p">,</span> <span class="k">KEY_MEMBER</span><span class="p">,</span> <span class="k">KEY_TYPE</span><span class="p">,</span> <span class="n">LABEL</span><span class="p">,</span> <span class="k">LANGUAGE</span><span class="p">,</span> <span class="k">LARGE</span><span class="p">,</span> <span class="k">LAST</span><span class="p">,</span> <span class="n">LAST_VALUE</span><span class="p">,</span> <span class="k">LATERAL</span><span class="p">,</span> <span class="k">LEADING</span><span class="p">,</span> <span class="k">LEFT</span><span class="p">,</span> <span class="k">LENGTH</span><span class="p">,</span> <span class="k">LEVEL</span><span class="p">,</span> <span class="n">LIBRARY</span><span class="p">,</span> <span class="k">LIKE</span><span class="p">,</span> <span class="k">LIMIT</span><span class="p">,</span> <span class="n">LN</span><span class="p">,</span> <span class="k">LOCAL</span><span class="p">,</span> <span class="k">LOCALTIME</span><span class="p">,</span> <span class="k">LOCALTIMESTAMP</span><span class="p">,</span> <span class="k">LOCATOR</span><span class="p">,</span> <span class="k">LOWER</span><span class="p">,</span> <span class="n">M</span><span class="p">,</span> <span class="k">MAP</span><span class="p">,</span> <span class="k">MATCH</span><span class="p">,</span> <span class="n">MATCHED</span><span class="p">,</span> <span class="k">MAX</span><span class="p">,</span> <span class="k">MAXVALUE</span><span class="p">,</span> <span class="n">MEMBER</span><span class="p">,</span> <span class="n">MERGE</span><span class="p">,</span> <span class="k">MESSAGE_LENGTH</span><span class="p">,</span> <span class="k">MESSAGE_OCTET_LENGTH</span><span class="p">,</span> <span class="k">MESSAGE_TEXT</span><span class="p">,</span> <span class="k">METHOD</span><span class="p">,</span> <span class="n">MICROSECOND</span><span class="p">,</span> <span class="n">MILLENNIUM</span><span class="p">,</span> <span class="k">MIN</span><span class="p">,</span> <span class="k">MINUTE</span><span class="p">,</span> <span class="k">MINVALUE</span><span class="p">,</span> <span class="k">MOD</span><span class="p">,</span> <span class="k">MODIFIES</span><span class="p">,</span> <span class="n">MODULE</span><span class="p">,</span> <span class="k">MONTH</span><span class="p">,</span> <span class="k">MORE</span><span class="p">,</span> <span class="n">MULTISET</span><span class="p">,</span> <span class="k">MUMPS</span><span class="p">,</span> <span class="n">NAME</span><span class="p">,</span> <span class="k">NAMES</span><span class="p">,</span> <span class="k">NATIONAL</span><span class="p">,</span> <span class="k">NATURAL</span><span class="p">,</span> <span class="k">NCHAR</span><span class="p">,</span> <span class="k">NCLOB</span><span class="p">,</span> <span class="n">NESTING</span><span class="p">,</span> <span class="k">NEW</span><span class="p">,</span> <span class="k">NEXT</span><span class="p">,</span> <span class="k">NO</span><span class="p">,</span> <span class="k">NONE</span><span class="p">,</span> <span class="n">NORMALIZE</span><span class="p">,</span> <span class="n">NORMALIZED</span><span class="p">,</span> <span class="k">NOT</span><span class="p">,</span> <span class="k">NULL</span><span class="p">,</span> <span class="k">NULLABLE</span><span class="p">,</span> <span class="k">NULLIF</span><span class="p">,</span> <span class="n">NULLS</span><span class="p">,</span> <span class="n">NUMBER</span><span class="p">,</span> <span class="n">NUMERIC</span><span class="p">,</span> <span class="k">OBJECT</span><span class="p">,</span> <span class="n">OCTETS</span><span class="p">,</span> <span class="k">OCTET_LENGTH</span><span class="p">,</span> <span class="k">OF</span><span class="p">,</span> <span class="k">OFFSET</span><span class="p">,</span> <span class="k">OLD</span><span class="p">,</span> <span class="k">ON</span><span class="p">,</span> <span class="k">ONLY</span><span class="p">,</span> <span class="k">OPEN</span><span class="p">,</span> <span class="k">OPTION</span><span class="p">,</span> <span class="k">OPTIONS</span><span class="p">,</span> <span class="k">OR</span><span class="p">,</span> <span class="k">ORDER</span><span class="p">,</span> <span class="n">ORDERING</span><span class="p">,</span> <span class="k">ORDINALITY</span><span class="p">,</span> <span class="n">OTHERS</span><span class="p">,</span> <span class="k">OUT</span><span class="p">,</span> <span class="k">OUTER</span><span class="p">,</span> <span class="k">OUTPUT</span><span class="p">,</span> <span class="n">OVER</span><span class="p">,</span> <span class="k">OVERLAPS</span><span class="p">,</span> <span class="k">OVERLAY</span><span class="p">,</span> <span class="k">OVERRIDING</span><span class="p">,</span> <span class="k">PAD</span><span class="p">,</span> <span class="k">PARAMETER</span><span class="p">,</span> <span class="k">PARAMETER_MODE</span><span class="p">,</span> <span class="n">PARAMETER_NAME</span><span class="p">,</span> <span class="n">PARAMETER_ORDINAL_POSITION</span><span class="p">,</span> <span class="k">PARAMETER_SPECIFIC_CATALOG</span><span class="p">,</span> <span class="k">PARAMETER_SPECIFIC_NAME</span><span class="p">,</span> <span class="n">PARAMETER_SPECIFIC_SCHEMA</span><span class="p">,</span> <span class="k">PARTIAL</span><span class="p">,</span> <span class="n">PARTITION</span><span class="p">,</span> <span class="k">PASCAL</span><span class="p">,</span> <span class="n">PASSTHROUGH</span><span class="p">,</span> <span class="n">PATH</span><span class="p">,</span> <span class="n">PERCENTILE_CONT</span><span class="p">,</span> <span class="n">PERCENTILE_DISC</span><span class="p">,</span> <span class="n">PERCENT_RANK</span><span class="p">,</span> <span class="k">PLACING</span><span class="p">,</span> <span class="n">PLAN</span><span class="p">,</span> <span class="k">PLI</span><span class="p">,</span> <span class="k">POSITION</span><span class="p">,</span> <span class="n">POWER</span><span class="p">,</span> <span class="n">PRECEDING</span><span class="p">,</span> <span class="k">PRECISION</span><span class="p">,</span> <span class="k">PREPARE</span><span class="p">,</span> <span class="k">PRESERVE</span><span class="p">,</span> <span class="k">PRIMARY</span><span class="p">,</span> <span class="k">PRIOR</span><span class="p">,</span> <span class="k">PRIVILEGES</span><span class="p">,</span> <span class="k">PROCEDURE</span><span class="p">,</span> <span class="k">PUBLIC</span><span class="p">,</span> <span class="n">QUARTER</span><span class="p">,</span> <span class="n">RANGE</span><span class="p">,</span> <span class="n">RANK</span><span class="p">,</span> <span class="k">READ</span><span class="p">,</span> <span class="k">READS</span><span class="p">,</span> <span class="n">REAL</span><span class="p">,</span> <span class="k">RECURSIVE</span><span class="p">,</span> <span class="k">REF</span><span class="p">,</span> <span class="k">REFERENCES</span><span class="p">,</span> <span class="k">REFERENCING</span><span class="p">,</span> <span class="n">REGR_AVGX</span><span class="p">,</span> <span class="n">REGR_AVGY</span><span class="p">,</span> <span class="n">REGR_COUNT</span><span class="p">,</span> <span class="n">REGR_INTERCEPT</span><span class="p">,</span> <span class="n">REGR_R2</span><span class="p">,</span> <span class="n">REGR_SLOPE</span><span class="p">,</span> <span class="n">REGR_SXX</span><span class="p">,</span> <span class="n">REGR_SXY</span><span class="p">,</span> <span class="n">REGR_SYY</span><span class="p">,</span> <span class="k">RELATIVE</span><span class="p">,</span> <span class="n">RELEASE</span><span class="p">,</span> <span class="k">REPEATABLE</span><span class="p">,</span> <span class="k">RESET</span><span class="p">,</span> <span class="k">RESTART</span><span class="p">,</span> <span class="k">RESTRICT</span><span class="p">,</span> <span class="k">RESULT</span><span class="p">,</span> <span class="k">RETURN</span><span class="p">,</span> <span class="n">RETURNED_CARDINALITY</span><span class="p">,</span> <span class="k">RETURNED_LENGTH</span><span class="p">,</span> <span class="k">RETURNED_OCTET_LENGTH</span><span class="p">,</span> <span class="k">RETURNED_SQLSTATE</span><span class="p">,</span> <span class="k">RETURNS</span><span class="p">,</span> <span class="k">REVOKE</span><span class="p">,</span> <span class="k">RIGHT</span><span class="p">,</span> <span class="k">ROLE</span><span class="p">,</span> <span class="k">ROLLBACK</span><span class="p">,</span> <span class="k">ROLLUP</span><span class="p">,</span> <span class="k">ROUTINE</span><span class="p">,</span> <span class="k">ROUTINE_CATALOG</span><span class="p">,</span> <span class="k">ROUTINE_NAME</span><span class="p">,</span> <span class="k">ROUTINE_SCHEMA</span><span class="p">,</span> <span class="k">ROW</span><span class="p">,</span> <span class="k">ROWS</span><span class="p">,</span> <span class="k">ROW_COUNT</span><span class="p">,</span> <span class="n">ROW_NUMBER</span><span class="p">,</span> <span class="n">SAVEPOINT</span><span class="p">,</span> <span class="k">SCALE</span><span class="p">,</span> <span class="k">SCHEMA</span><span class="p">,</span> <span class="k">SCHEMA_NAME</span><span class="p">,</span> <span class="k">SCOPE</span><span class="p">,</span> <span class="n">SCOPE_CATALOGS</span><span class="p">,</span> <span class="n">SCOPE_NAME</span><span class="p">,</span> <span class="n">SCOPE_SCHEMA</span><span class="p">,</span> <span class="k">SCROLL</span><span class="p">,</span> <span class="k">SEARCH</span><span class="p">,</span> <span class="k">SECOND</span><span class="p">,</span> <span class="n">SECTION</span><span class="p">,</span> <span class="k">SECURITY</span><span class="p">,</span> <span class="k">SELECT</span><span class="p">,</span> <span class="k">SELF</span><span class="p">,</span> <span class="k">SENSITIVE</span><span class="p">,</span> <span class="n">SEQUENCE</span><span class="p">,</span> <span class="k">SERIALIZABLE</span><span class="p">,</span> <span class="n">SERVER</span><span class="p">,</span> <span class="k">SERVER_NAME</span><span class="p">,</span> <span class="k">SESSION</span><span class="p">,</span> <span class="k">SESSION_USER</span><span class="p">,</span> <span class="k">SET</span><span class="p">,</span> <span class="k">SETS</span><span class="p">,</span> <span class="k">SIMILAR</span><span class="p">,</span> <span class="k">SIMPLE</span><span class="p">,</span> <span class="k">SIZE</span><span class="p">,</span> <span class="n">SMALLINT</span><span class="p">,</span> <span class="k">SOME</span><span class="p">,</span> <span class="k">SOURCE</span><span class="p">,</span> <span class="k">SPACE</span><span class="p">,</span> <span class="k">SPECIFIC</span><span class="p">,</span> <span class="k">SPECIFICTYPE</span><span class="p">,</span> <span class="k">SPECIFIC_NAME</span><span class="p">,</span> <span class="k">SQL</span><span class="p">,</span> <span class="k">SQLEXCEPTION</span><span class="p">,</span> <span class="k">SQLSTATE</span><span class="p">,</span> <span class="n">SQLWARNING</span><span class="p">,</span> <span class="n">SQL_TSI_DAY</span><span class="p">,</span> <span class="n">SQL_TSI_FRAC_SECOND</span><span class="p">,</span> <span class="n">SQL_TSI_HOUR</span><span class="p">,</span> <span class="n">SQL_TSI_MICROSECOND</span><span class="p">,</span> <span class="n">SQL_TSI_MINUTE</span><span class="p">,</span> <span class="n">SQL_TSI_MONTH</span><span class="p">,</span> <span class="n">SQL_TSI_QUARTER</span><span class="p">,</span> <span class="n">SQL_TSI_SECOND</span><span class="p">,</span> <span class="n">SQL_TSI_WEEK</span><span class="p">,</span> <span class="n">SQL_TSI_YEAR</span><span class="p">,</span> <span class="n">SQRT</span><span class="p">,</span> <span class="k">START</span><span class="p">,</span> <span class="k">STATE</span><span class="p">,</span> <span class="k">STATEMENT</span><span class="p">,</span> <span class="k">STATIC</span><span class="p">,</span> <span class="n">STDDEV_POP</span><span class="p">,</span> <span class="n">STDDEV_SAMP</span><span class="p">,</span> <span class="n">STREAM</span><span class="p">,</span> <span class="k">STRUCTURE</span><span class="p">,</span> <span class="n">STYLE</span><span class="p">,</span> <span class="k">SUBCLASS_ORIGIN</span><span class="p">,</span> <span class="n">SUBMULTISET</span><span class="p">,</span> <span class="n">SUBSTITUTE</span><span class="p">,</span> <span class="k">SUBSTRING</span><span class="p">,</span> <span class="k">SUM</span><span class="p">,</span> <span class="k">SYMMETRIC</span><span class="p">,</span> <span class="k">SYSTEM</span><span class="p">,</span> <span class="k">SYSTEM_USER</span><span class="p">,</span> <span class="k">TABLE</span><span class="p">,</span> <span class="n">TABLESAMPLE</span><span class="p">,</span> <span class="k">TABLE_NAME</span><span class="p">,</span> <span class="k">TEMPORARY</span><span class="p">,</span> <span class="k">THEN</span><span class="p">,</span> <span class="n">TIES</span><span class="p">,</span> <span class="n">TIME</span><span class="p">,</span> <span class="k">TIMESTAMP</span><span class="p">,</span> <span class="n">TIMESTAMPADD</span><span class="p">,</span> <span class="n">TIMESTAMPDIFF</span><span class="p">,</span> <span class="k">TIMEZONE_HOUR</span><span class="p">,</span> <span class="k">TIMEZONE_MINUTE</span><span class="p">,</span> <span class="n">TINYINT</span><span class="p">,</span> <span class="k">TO</span><span class="p">,</span> <span class="n">TOP_LEVEL_COUNT</span><span class="p">,</span> <span class="k">TRAILING</span><span class="p">,</span> <span class="n">TRANSACTION</span><span class="p">,</span> <span class="n">TRANSACTIONS_ACTIVE</span><span class="p">,</span> <span class="k">TRANSACTIONS_COMMITTED</span><span class="p">,</span> <span class="k">TRANSACTIONS_ROLLED_BACK</span><span class="p">,</span> <span class="k">TRANSFORM</span><span class="p">,</span> <span class="k">TRANSFORMS</span><span class="p">,</span> <span class="k">TRANSLATE</span><span class="p">,</span> <span class="k">TRANSLATION</span><span class="p">,</span> <span class="k">TREAT</span><span class="p">,</span> <span class="k">TRIGGER</span><span class="p">,</span> <span class="k">TRIGGER_CATALOG</span><span class="p">,</span> <span class="k">TRIGGER_NAME</span><span class="p">,</span> <span class="k">TRIGGER_SCHEMA</span><span class="p">,</span> <span class="k">TRIM</span><span class="p">,</span> <span class="k">TRUE</span><span class="p">,</span> <span class="k">TYPE</span><span class="p">,</span> <span class="n">UESCAPE</span><span class="p">,</span> <span class="n">UNBOUNDED</span><span class="p">,</span> <span class="k">UNCOMMITTED</span><span class="p">,</span> <span class="k">UNDER</span><span class="p">,</span> <span class="k">UNION</span><span class="p">,</span> <span class="k">UNIQUE</span><span class="p">,</span> <span class="k">UNKNOWN</span><span class="p">,</span> <span class="k">UNNAMED</span><span class="p">,</span> <span class="k">UNNEST</span><span class="p">,</span> <span class="k">UPDATE</span><span class="p">,</span> <span class="k">UPPER</span><span class="p">,</span> <span class="n">UPSERT</span><span class="p">,</span> <span class="k">USAGE</span><span class="p">,</span> <span class="k">USER</span><span class="p">,</span> <span class="k">USER_DEFINED_TYPE_CATALOG</span><span class="p">,</span> <span class="n">USER_DEFINED_TYPE_CODE</span><span class="p">,</span> <span class="k">USER_DEFINED_TYPE_NAME</span><span class="p">,</span> <span class="k">USER_DEFINED_TYPE_SCHEMA</span><span class="p">,</span> <span class="k">USING</span><span class="p">,</span> <span class="n">VALUE</span><span class="p">,</span> <span class="k">VALUES</span><span class="p">,</span> <span class="n">VARBINARY</span><span class="p">,</span> <span class="n">VARCHAR</span><span class="p">,</span> <span class="n">VARYING</span><span class="p">,</span> <span class="n">VAR_POP</span><span class="p">,</span> <span class="n">VAR_SAMP</span><span class="p">,</span> <span class="k">VERSION</span><span class="p">,</span> <span class="k">VIEW</span><span class="p">,</span> <span class="n">WEEK</span><span class="p">,</span> <span class="k">WHEN</span><span class="p">,</span> <span class="k">WHENEVER</span><span class="p">,</span> <span class="k">WHERE</span><span class="p">,</span> <span class="n">WIDTH_BUCKET</span><span class="p">,</span> <span class="n">WINDOW</span><span class="p">,</span> <span class="k">WITH</span><span class="p">,</span> <span class="n">WITHIN</span><span class="p">,</span> <span class="k">WITHOUT</span><span class="p">,</span> <span class="k">WORK</span><span class="p">,</span> <span class="n">WRAPPER</span><span class="p">,</span> <span class="k">WRITE</span><span class="p">,</span> <span class="n">XML</span><span class="p">,</span> <span class="k">YEAR</span><span class="p">,</span> <span class="k">ZONE</span></code></pre></figure>

<h4 id="date-format-specifier">Date Format Specifier</h4>

<table class="table table-bordered">
  <thead>
    <tr>
      <th class="text-left" style="width: 40%">Specifier</th>
      <th class="text-center">Description</th>
    </tr>
  </thead>
  <tbody>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%a</code></pre></figure>
</td>
  <td>Abbreviated weekday name (<code>Sun</code> .. <code>Sat</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%b</code></pre></figure>
</td>
  <td>Abbreviated month name (<code>Jan</code> .. <code>Dec</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%c</code></pre></figure>
</td>
  <td>Month, numeric (<code>1</code> .. <code>12</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%D</code></pre></figure>
</td>
  <td>Day of the month with English suffix (<code>0th</code>, <code>1st</code>, <code>2nd</code>, <code>3rd</code>, ...)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%d</code></pre></figure>
</td>
  <td>Day of the month, numeric (<code>01</code> .. <code>31</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%e</code></pre></figure>
</td>
  <td>Day of the month, numeric (<code>1</code> .. <code>31</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%f</code></pre></figure>
</td>
  <td>Fraction of second (6 digits for printing: <code>000000</code> .. <code>999000</code>; 1 - 9 digits for parsing: <code>0</code> .. <code>999999999</code>) (Timestamp is truncated to milliseconds.) </td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%H</code></pre></figure>
</td>
  <td>Hour (<code>00</code> .. <code>23</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%h</code></pre></figure>
</td>
  <td>Hour (<code>01</code> .. <code>12</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%I</code></pre></figure>
</td>
  <td>Hour (<code>01</code> .. <code>12</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%i</code></pre></figure>
</td>
  <td>Minutes, numeric (<code>00</code> .. <code>59</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%j</code></pre></figure>
</td>
  <td>Day of year (<code>001</code> .. <code>366</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%k</code></pre></figure>
</td>
  <td>Hour (<code>0</code> .. <code>23</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%l</code></pre></figure>
</td>
  <td>Hour (<code>1</code> .. <code>12</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%M</code></pre></figure>
</td>
  <td>Month name (<code>January</code> .. <code>December</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%m</code></pre></figure>
</td>
  <td>Month, numeric (<code>01</code> .. <code>12</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%p</code></pre></figure>
</td>
  <td><code>AM</code> or <code>PM</code></td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%r</code></pre></figure>
</td>
  <td>Time, 12-hour (<code>hh:mm:ss</code> followed by <code>AM</code> or <code>PM</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%S</code></pre></figure>
</td>
  <td>Seconds (<code>00</code> .. <code>59</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%s</code></pre></figure>
</td>
  <td>Seconds (<code>00</code> .. <code>59</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%T</code></pre></figure>
</td>
  <td>Time, 24-hour (<code>hh:mm:ss</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%U</code></pre></figure>
</td>
  <td>Week (<code>00</code> .. <code>53</code>), where Sunday is the first day of the week</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%u</code></pre></figure>
</td>
  <td>Week (<code>00</code> .. <code>53</code>), where Monday is the first day of the week</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%V</code></pre></figure>
</td>
  <td>Week (<code>01</code> .. <code>53</code>), where Sunday is the first day of the week; used with <code>%X</code></td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%v</code></pre></figure>
</td>
  <td>Week (<code>01</code> .. <code>53</code>), where Monday is the first day of the week; used with <code>%x</code></td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%W</code></pre></figure>
</td>
  <td>Weekday name (<code>Sunday</code> .. <code>Saturday</code>)</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%w</code></pre></figure>
</td>
  <td>Day of the week (<code>0</code> .. <code>6</code>), where Sunday is the first day of the week</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%X</code></pre></figure>
</td>
  <td>Year for the week where Sunday is the first day of the week, numeric, four digits; used with <code>%V</code></td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%x</code></pre></figure>
</td>
  <td>Year for the week, where Monday is the first day of the week, numeric, four digits; used with <code>%v</code></td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%Y</code></pre></figure>
</td>
  <td>Year, numeric, four digits</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%y</code></pre></figure>
</td>
  <td>Year, numeric (two digits) </td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%%</code></pre></figure>
</td>
  <td>A literal <code>%</code> character</td>
  </tr>
  <tr><td>
<figure class="highlight"><pre><code class="language-text" data-lang="text">%x</code></pre></figure>
</td>
  <td><code>x</code>, for any <code>x</code> not listed above</td>
  </tr>
  </tbody>
</table>

<p><a href="#top" class="top pull-right"><span class="glyphicon glyphicon-chevron-up"></span> Back to top</a></p>



        </div>
      </div>
    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//flink-china.org/doc/blink/page/js/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="//flink-china.org/doc/blink/page/js/flink.js"></script>

    <!-- Google Analytics -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script>

    <!-- Disqus -->
    
  </body>
</html>
